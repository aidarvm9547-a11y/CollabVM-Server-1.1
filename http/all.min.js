var _____WB$wombat$assign$function_____=function(name){return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name))||self[name];};if(!self.__WB_pmw){self.__WB_pmw=function(obj){this.__WB_source=obj;return this;}}{
let window = _____WB$wombat$assign$function_____("window");
let self = _____WB$wombat$assign$function_____("self");
let document = _____WB$wombat$assign$function_____("document");
let location = _____WB$wombat$assign$function_____("location");
let top = _____WB$wombat$assign$function_____("top");
let parent = _____WB$wombat$assign$function_____("parent");
let frames = _____WB$wombat$assign$function_____("frames");
let opens = _____WB$wombat$assign$function_____("opens");
var Guacamole=Guacamole||{};Guacamole.ArrayBufferReader=function(b){var a=this;b.onblob=function(b){b=window.atob(b);for(var d=new ArrayBuffer(b.length),f=new Uint8Array(d),h=0;h<b.length;h++)f[h]=b.charCodeAt(h);if(a.ondata)a.ondata(d)};b.onend=function(){if(a.onend)a.onend()};this.onend=this.ondata=null};Guacamole=Guacamole||{};Guacamole.ArrayBufferWriter=function(b){function a(a){for(var f="",c=0;c<a.byteLength;c++)f+=String.fromCharCode(a[c]);b.sendBlob(window.btoa(f))}var c=this;b.onack=function(b){if(c.onack)c.onack(b)};this.sendData=function(b){b=new Uint8Array(b);if(8064>=b.length)a(b);else for(var c=0;c<b.length;c+=8064)a(b.subarray(c,c+8094))};this.sendEnd=function(){b.sendEnd()};this.onack=null};Guacamole=Guacamole||{};Guacamole.AudioChannel=function(){var b=0;this.play=function(a,c,d){a=new Guacamole.AudioChannel.Packet(a,d);d=Guacamole.AudioChannel.getTimestamp();b<d&&(b=d);a.play(b);b+=c}};window.AudioContext?Guacamole.AudioChannel.context=new AudioContext:window.webkitAudioContext&&(Guacamole.AudioChannel.context=new webkitAudioContext);
Guacamole.AudioChannel.getTimestamp=function(){if(Guacamole.AudioChannel.context)return 1E3*Guacamole.AudioChannel.context.currentTime;if(window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return(new Date).getTime()};
Guacamole.AudioChannel.Packet=function(b,a){this.play=function(b){};if(Guacamole.AudioChannel.context){var c=function(b){l.buffer=b;l.start(g/1E3)},d=null,f=function(b){d=b},h=new FileReader;h.onload=function(){Guacamole.AudioChannel.context.decodeAudioData(h.result,function(b){f(b)})};h.readAsArrayBuffer(a);var l=Guacamole.AudioChannel.context.createBufferSource();l.connect(Guacamole.AudioChannel.context.destination);l.start||(l.start=l.noteOn);var g;this.play=function(b){g=b;d?c(d):f=c}}else{var m=
!1,k=null;try{k=new Audio}catch(q){}if(k){var p=function(){k.src?k.play():m=!0},h=new FileReader;h.onload=function(){for(var a="",d=new Uint8Array(h.result),c=0;c<d.byteLength;c++)a+=String.fromCharCode(d[c]);k.src="data:"+b+";base64,"+window.btoa(a);m&&k.play()};h.readAsArrayBuffer(a);this.play=function(b){var a=Guacamole.AudioChannel.getTimestamp();b-=a;0>b?p():window.setTimeout(p,b)}}}};Guacamole=Guacamole||{};
Guacamole.BlobReader=function(b,a){var c=this,d=0,f;f=window.BlobBuilder?new BlobBuilder:window.WebKitBlobBuilder?new WebKitBlobBuilder:window.MozBlobBuilder?new MozBlobBuilder:new function(){var b=[];this.append=function(d){b.push(new Blob([d],{type:a}))};this.getBlob=function(){return new Blob(b,{type:a})}};b.onblob=function(a){a=window.atob(a);for(var l=new ArrayBuffer(a.length),g=new Uint8Array(l),m=0;m<a.length;m++)g[m]=a.charCodeAt(m);f.append(l);d+=l.byteLength;if(c.onprogress)c.onprogress(l.byteLength);b.sendAck("OK",
0)};b.onend=function(){if(c.onend)c.onend()};this.getLength=function(){return d};this.getBlob=function(){return f.getBlob()};this.onend=this.onprogress=null};Guacamole=Guacamole||{};
Guacamole.Client=function(b){function a(e){if(e!=l&&(l=e,h.onstatechange))h.onstatechange(l)}function c(){return 3==l||2==l}function d(e){var b=p[e];b||(b=0===e?k.getDefaultLayer():0<e?k.createLayer():k.createBuffer(),p[e]=b);return b}function f(e){var b=n[e];null==b&&(b=n[e]=new Guacamole.AudioChannel);return b}var h=this,l=0,g={0:"butt",1:"round",2:"square"},m={0:"bevel",1:"miter",2:"round"},k=new Guacamole.Display,p={},q=[],n=[],r=[],t=new Guacamole.IntegerPool,u=[];this.getDisplay=function(){return k};
this.sendSize=function(e,a){c()&&b.sendMessage("size",e,a)};this.sendKeyEvent=function(e,a){c()&&b.sendMessage("key",a,e)};this.sendMouseState=function(e){if(c()){k.moveCursor(Math.floor(e.x),Math.floor(e.y));var a=0;e.left&&(a|=1);e.middle&&(a|=2);e.right&&(a|=4);e.up&&(a|=8);e.down&&(a|=16);b.sendMessage("mouse",Math.floor(e.x),Math.floor(e.y),a)}};this.setClipboard=function(e){if(c()){for(var b=h.createClipboardStream("text/plain"),b=new Guacamole.StringWriter(b),a=0;a<e.length;a+=4096)b.sendText(e.substring(a,
a+4096));b.sendEnd()}};this.createFileStream=function(e,a){var d=t.next();b.sendMessage("file",d,e,a);var c=u[d]=new Guacamole.OutputStream(h,d),k=c.sendEnd;c.sendEnd=function(){k();t.free(d);delete u[d]};return c};this.createPipeStream=function(e,a){var d=t.next();b.sendMessage("pipe",d,e,a);var c=u[d]=new Guacamole.OutputStream(h,d),k=c.sendEnd;c.sendEnd=function(){k();t.free(d);delete u[d]};return c};this.createClipboardStream=function(e){var a=t.next();b.sendMessage("clipboard",a,e);e=u[a]=new Guacamole.OutputStream(h,
a);var d=e.sendEnd;e.sendEnd=function(){d();t.free(a);delete u[a]};return e};this.sendAck=function(e,a,d){c()&&b.sendMessage("ack",e,a,d)};this.sendBlob=function(e,a){c()&&b.sendMessage("blob",e,a)};this.endStream=function(e){c()&&b.sendMessage("end",e)};this.onconnect=this.onremuser=this.onadduser=this.onrename=this.onchat=this.onturn=this.onsync=this.onpipe=this.onfile=this.onclipboard=this.onerror=this.onname=this.onstatechange=null;var v={"miter-limit":function(e,a){k.setMiterLimit(e,parseFloat(a))}},
w={turn:function(e){if(h.onturn)h.onturn(e)},rename:function(e){if(h.onrename)h.onrename(e)},chat:function(e){if(h.onchat)h.onchat(e)},adduser:function(e){if(h.onadduser)h.onadduser(e)},remuser:function(e){if(h.onremuser)h.onremuser(e)},connect:function(e){if(h.onconnect)h.onconnect(e)},nop:function(){b.sendMessage("nop")},ack:function(e){var a=parseInt(e[0]),b=e[1];e=parseInt(e[2]);var d=u[a];if(d){if(d.onack)d.onack(new Guacamole.Status(e,b));256<=e&&(t.free(a),delete u[a])}},arc:function(e){var a=
d(parseInt(e[0])),b=parseInt(e[1]),c=parseInt(e[2]),f=parseInt(e[3]),h=parseFloat(e[4]),g=parseFloat(e[5]);e=parseInt(e[6]);k.arc(a,b,c,f,h,g,0!=e)},audio:function(e){var a=parseInt(e[0]),b=f(parseInt(e[1])),d=e[2],c=parseFloat(e[3]);e=r[a]=new Guacamole.InputStream(h,a);var k=new Guacamole.BlobReader(e,d);k.onend=function(){b.play(d,c,k.getBlob())};h.sendAck(a,"OK",0)},blob:function(e){var a=parseInt(e[0]);r[a].onblob(e[1])},cfill:function(e){var a=parseInt(e[0]),b=d(parseInt(e[1])),c=parseInt(e[2]),
f=parseInt(e[3]),h=parseInt(e[4]);e=parseInt(e[5]);k.setChannelMask(b,a);k.fillColor(b,c,f,h,e)},clip:function(e){e=d(parseInt(e[0]));k.clip(e)},clipboard:function(e){var a=parseInt(e[0]);e=e[1];h.onclipboard?(a=r[a]=new Guacamole.InputStream(h,a),h.onclipboard(a,e)):h.sendAck(a,"Clipboard unsupported",256)},close:function(e){e=d(parseInt(e[0]));k.close(e)},copy:function(e){var a=d(parseInt(e[0])),b=parseInt(e[1]),c=parseInt(e[2]),f=parseInt(e[3]),h=parseInt(e[4]),g=parseInt(e[5]),t=d(parseInt(e[6])),
m=parseInt(e[7]);e=parseInt(e[8]);k.setChannelMask(t,g);k.copy(a,b,c,f,h,t,m,e)},cstroke:function(e){var a=parseInt(e[0]),b=d(parseInt(e[1])),c=g[parseInt(e[2])],f=m[parseInt(e[3])],h=parseInt(e[4]),t=parseInt(e[5]),p=parseInt(e[6]),w=parseInt(e[7]);e=parseInt(e[8]);k.setChannelMask(b,a);k.strokeColor(b,c,f,h,t,p,w,e)},cursor:function(e){var a=parseInt(e[0]),b=parseInt(e[1]),c=d(parseInt(e[2])),f=parseInt(e[3]),h=parseInt(e[4]),g=parseInt(e[5]);e=parseInt(e[6]);k.setCursor(a,b,c,f,h,g,e)},curve:function(e){var a=
d(parseInt(e[0])),b=parseInt(e[1]),c=parseInt(e[2]),f=parseInt(e[3]),h=parseInt(e[4]),g=parseInt(e[5]);e=parseInt(e[6]);k.curveTo(a,b,c,f,h,g,e)},dispose:function(e){e=parseInt(e[0]);0<e?(d(e).dispose(),delete p[e]):0>e&&delete p[e]},distort:function(e){var a=parseInt(e[0]),b=parseFloat(e[1]),c=parseFloat(e[2]),k=parseFloat(e[3]),f=parseFloat(e[4]),h=parseFloat(e[5]);e=parseFloat(e[6]);0<=a&&d(a).distort(b,c,k,f,h,e)},error:function(e){var a=e[0];e=parseInt(e[1]);if(h.onerror)h.onerror(new Guacamole.Status(e,
a));h.disconnect()},end:function(e){e=parseInt(e[0]);e=r[e];if(e.onend)e.onend()},file:function(e){var a=parseInt(e[0]),b=e[1];e=e[2];h.onfile?(a=r[a]=new Guacamole.InputStream(h,a),h.onfile(a,b,e)):h.sendAck(a,"File transfer unsupported",256)},identity:function(e){e=d(parseInt(e[0]));k.setTransform(e,1,0,0,1,0,0)},lfill:function(e){var a=parseInt(e[0]),b=d(parseInt(e[1]));e=d(parseInt(e[2]));k.setChannelMask(b,a);k.fillLayer(b,e)},line:function(e){var a=d(parseInt(e[0])),b=parseInt(e[1]);e=parseInt(e[2]);
k.lineTo(a,b,e)},lstroke:function(e){var a=parseInt(e[0]),b=d(parseInt(e[1]));e=d(parseInt(e[2]));k.setChannelMask(b,a);k.strokeLayer(b,e)},move:function(e){var a=parseInt(e[0]),b=parseInt(e[1]),c=parseInt(e[2]),k=parseInt(e[3]);e=parseInt(e[4]);0<a&&0<=b&&(a=d(a),b=d(b),a.move(b,c,k,e))},name:function(e){if(h.onname)h.onname(e[0])},nest:function(e){var a=parseInt(e[0]),d=q[a];null==d&&(d=q[a]=new Guacamole.Parser,d.oninstruction=b.oninstruction);d.receive(e[1])},pipe:function(e){var a=parseInt(e[0]),
b=e[1];e=e[2];h.onpipe?(a=r[a]=new Guacamole.InputStream(h,a),h.onpipe(a,b,e)):h.sendAck(a,"Named pipes unsupported",256)},png:function(a){var b=parseInt(a[0]),c=d(parseInt(a[1])),f=parseInt(a[2]),h=parseInt(a[3]);a=a[4];k.setChannelMask(c,b);k.draw(c,f,h,"data:image/png;base64,"+a)},pop:function(a){a=d(parseInt(a[0]));k.pop(a)},push:function(a){a=d(parseInt(a[0]));k.push(a)},rect:function(a){var b=d(parseInt(a[0])),c=parseInt(a[1]),f=parseInt(a[2]),h=parseInt(a[3]);a=parseInt(a[4]);k.rect(b,c,f,
h,a)},reset:function(a){a=d(parseInt(a[0]));k.reset(a)},set:function(a){var b=d(parseInt(a[0])),c=a[2];(a=v[a[1]])&&a(b,c)},shade:function(a){var b=parseInt(a[0]);a=parseInt(a[1]);0<=b&&d(b).shade(a)},size:function(a){var b=parseInt(a[0]),b=d(b),c=parseInt(a[1]);a=parseInt(a[2]);k.resize(b,c,a)},start:function(a){var b=d(parseInt(a[0])),c=parseInt(a[1]);a=parseInt(a[2]);k.moveTo(b,c,a)},sync:function(a){a=parseInt(a[0]);k.flush(null);if(h.onsync)h.onsync(a)},transfer:function(a){var b=d(parseInt(a[0])),
c=parseInt(a[1]),f=parseInt(a[2]),h=parseInt(a[3]),g=parseInt(a[4]),t=parseInt(a[5]),m=d(parseInt(a[6])),p=parseInt(a[7]);a=parseInt(a[8]);3===t?k.put(b,c,f,h,g,m,p,a):5!==t&&k.transfer(b,c,f,h,g,m,p,a,Guacamole.Client.DefaultTransferFunction[t])},transform:function(a){var b=d(parseInt(a[0])),c=parseFloat(a[1]),f=parseFloat(a[2]),h=parseFloat(a[3]),g=parseFloat(a[4]),t=parseFloat(a[5]);a=parseFloat(a[6]);k.transform(b,c,f,h,g,t,a)},video:function(a){var c=parseInt(a[0]),f=d(parseInt(a[1])),k=a[2],
g=parseFloat(a[3]);a=r[c]=new Guacamole.InputStream(h,c);var t=new Guacamole.BlobReader(a,k);t.onend=function(){var a=new FileReader;a.onload=function(){for(var b="",e=new Uint8Array(a.result),d=0;d<e.byteLength;d++)b+=String.fromCharCode(e[d]);f.play(k,g,"data:"+k+";base64,"+window.btoa(b))};a.readAsArrayBuffer(t.getBlob())};b.sendMessage("ack",c,"OK",0)}};b.oninstruction=function(a,b){var d=w[a];d&&d(b)};this.disconnect=function(){5!=l&&4!=l&&(a(4),b.sendMessage("disconnect"),b.disconnect(),a(5))};
this.connect=function(e){a(1);try{b.connect(e)}catch(d){throw a(0),d;}a(2)}};
Guacamole.Client.DefaultTransferFunction={0:function(b,a){a.red=a.green=a.blue=0},15:function(b,a){a.red=a.green=a.blue=255},3:function(b,a){a.red=b.red;a.green=b.green;a.blue=b.blue;a.alpha=b.alpha},5:function(b,a){},12:function(b,a){a.red=255&~b.red;a.green=255&~b.green;a.blue=255&~b.blue;a.alpha=b.alpha},10:function(b,a){a.red=255&~a.red;a.green=255&~a.green;a.blue=255&~a.blue},1:function(b,a){a.red&=b.red;a.green&=b.green;a.blue&=b.blue},14:function(b,a){a.red=255&~(b.red&a.red);a.green=255&~(b.green&
a.green);a.blue=255&~(b.blue&a.blue)},7:function(b,a){a.red|=b.red;a.green|=b.green;a.blue|=b.blue},8:function(b,a){a.red=255&~(b.red|a.red);a.green=255&~(b.green|a.green);a.blue=255&~(b.blue|a.blue)},6:function(b,a){a.red^=b.red;a.green^=b.green;a.blue^=b.blue},9:function(b,a){a.red=255&~(b.red^a.red);a.green=255&~(b.green^a.green);a.blue=255&~(b.blue^a.blue)},4:function(b,a){a.red&=255&~b.red;a.green&=255&~b.green;a.blue&=255&~b.blue},13:function(b,a){a.red=255&(~b.red|a.red);a.green=255&(~b.green|
a.green);a.blue=255&(~b.blue|a.blue)},2:function(b,a){a.red=255&b.red&~a.red;a.green=255&b.green&~a.green;a.blue=255&b.blue&~a.blue},11:function(b,a){a.red=255&(b.red|~a.red);a.green=255&(b.green|~a.green);a.blue=255&(b.blue|~a.blue)}};Guacamole=Guacamole||{};
Guacamole.Display=function(){function b(){for(var a=0;a<r.length;){var b=r[a];if(!b.isReady())break;b.flush();a++}r.splice(0,a)}function a(a,b){this.isReady=function(){for(var a=0;a<b.length;a++)if(b[a].blocked)return!1;return!0};this.flush=function(){for(var d=0;d<b.length;d++)b[d].execute();a&&a()}}function c(a,d){var c=this;this.blocked=d;this.unblock=function(){c.blocked&&(c.blocked=!1,b())};this.execute=function(){a&&a()}}function d(a,b){var d=new c(a,b);n.push(d);return d}var f=this,h=0,l=0,
g=1,m=document.createElement("div");m.style.position="relative";m.style.width=h+"px";m.style.height=l+"px";m.style.transformOrigin=m.style.webkitTransformOrigin=m.style.MozTransformOrigin=m.style.OTransformOrigin=m.style.msTransformOrigin="0 0";var k=new Guacamole.Display.VisibleLayer(h,l),p=new Guacamole.Display.VisibleLayer(0,0);p.setChannelMask(Guacamole.Layer.SRC);m.appendChild(k.getElement());m.appendChild(p.getElement());var q=document.createElement("div");q.style.position="relative";q.style.width=
h*g+"px";q.style.height=l*g+"px";q.appendChild(m);this.cursorY=this.cursorX=this.cursorHotspotY=this.cursorHotspotX=0;this.oncursor=this.onresize=null;var n=[],r=[];this.getElement=function(){return q};this.getWidth=function(){return h};this.getHeight=function(){return l};this.getDefaultLayer=function(){return k};this.getCursorLayer=function(){return p};this.createLayer=function(){var a=new Guacamole.Display.VisibleLayer(h,l);a.move(k,0,0,0);return a};this.createBuffer=function(){var a=new Guacamole.Layer(0,
0);a.autosize=1;return a};this.flush=function(d){r.push(new a(d,n));n=[];b()};this.setCursor=function(a,b,c,k,e,h,g){d(function(){f.cursorHotspotX=a;f.cursorHotspotY=b;p.resize(h,g);p.copy(c,k,e,h,g,0,0);f.moveCursor(f.cursorX,f.cursorY);if(f.oncursor)f.oncursor(p.getCanvas(),a,b)})};this.showCursor=function(a){var b=p.getElement(),d=b.parentNode;!1===a?d&&d.removeChild(b):d!==m&&m.appendChild(b)};this.moveCursor=function(a,b){p.translate(a-f.cursorHotspotX,b-f.cursorHotspotY);f.cursorX=a;f.cursorY=
b};this.resize=function(a,b,c){d(function(){a.resize(b,c);if(a===k&&(h=b,l=c,m.style.width=h+"px",m.style.height=l+"px",q.style.width=h*g+"px",q.style.height=l*g+"px",f.onresize))f.onresize(b,c)})};this.drawImage=function(a,b,c,k){d(function(){a.drawImage(b,c,k)})};this.draw=function(a,b,c,k){var e=d(function(){a.drawImage(b,c,f)},!0),f=new Image;f.onload=e.unblock;f.src=k};this.play=function(a,b,c,k){var e=document.createElement("video");e.type=b;e.src=k;e.addEventListener("play",function(){function b(){a.drawImage(0,
0,e);e.ended||window.setTimeout(b,20)}b()},!1);d(e.play)};this.transfer=function(a,b,c,k,e,f,h,g,m){d(function(){f.transfer(a,b,c,k,e,h,g,m)})};this.put=function(a,b,c,k,e,f,h,g){d(function(){f.put(a,b,c,k,e,h,g)})};this.copy=function(a,b,c,k,e,f,h,g){d(function(){f.copy(a,b,c,k,e,h,g)})};this.moveTo=function(a,b,c){d(function(){a.moveTo(b,c)})};this.lineTo=function(a,b,c){d(function(){a.lineTo(b,c)})};this.arc=function(a,b,c,k,e,f,h){d(function(){a.arc(b,c,k,e,f,h)})};this.curveTo=function(a,b,c,
k,e,f,h){d(function(){a.curveTo(b,c,k,e,f,h)})};this.close=function(a){d(function(){a.close()})};this.rect=function(a,b,c,k,e){d(function(){a.rect(b,c,k,e)})};this.clip=function(a){d(function(){a.clip()})};this.strokeColor=function(a,b,c,k,e,f,h,g){d(function(){a.strokeColor(b,c,k,e,f,h,g)})};this.fillColor=function(a,b,c,k,e){d(function(){a.fillColor(b,c,k,e)})};this.strokeLayer=function(a,b,c,k,e){d(function(){a.strokeLayer(b,c,k,e)})};this.fillLayer=function(a,b){d(function(){a.fillLayer(b)})};
this.push=function(a){d(function(){a.push()})};this.pop=function(a){d(function(){a.pop()})};this.reset=function(a){d(function(){a.reset()})};this.setTransform=function(a,b,c,k,e,f,h){d(function(){a.setTransform(b,c,k,e,f,h)})};this.transform=function(a,b,c,k,e,f,h){d(function(){a.transform(b,c,k,e,f,h)})};this.setChannelMask=function(a,b){d(function(){a.setChannelMask(b)})};this.setMiterLimit=function(a,b){d(function(){a.setMiterLimit(b)})};this.scale=function(a){m.style.transform=m.style.WebkitTransform=
m.style.MozTransform=m.style.OTransform=m.style.msTransform="scale("+a+","+a+")";g=a;q.style.width=h*g+"px";q.style.height=l*g+"px"};this.getScale=function(){return g};this.flatten=function(){function a(b){var c=[],d;for(d in b.children)c.push(b.children[d]);c.sort(function(a,b){var e=a.z-b.z;if(0!==e)return e;e=a.getElement();e=b.getElement().compareDocumentPosition(e);return e&Node.DOCUMENT_POSITION_PRECEDING?-1:e&Node.DOCUMENT_POSITION_FOLLOWING?1:0});return c}function b(e,c,k){if(0<e.width&&0<
e.height){var f=d.globalAlpha;d.globalAlpha*=e.alpha/255;d.drawImage(e.getCanvas(),c,k);e=a(e);for(var h=0;h<e.length;h++){var g=e[h];b(g,c+g.x,k+g.y)}d.globalAlpha=f}}var c=document.createElement("canvas");c.width=k.width;c.height=k.height;var d=c.getContext("2d");b(k,0,0);return c}};
Guacamole.Display.VisibleLayer=function(b,a){Guacamole.Layer.apply(this,[b,a]);var c=this;this.__unique_id=Guacamole.Display.VisibleLayer.__next_id++;this.alpha=255;this.z=this.y=this.x=0;this.matrix=[1,0,0,1,0,0];this.parent=null;this.children={};var d=c.getCanvas();d.style.position="absolute";d.style.left="0px";d.style.top="0px";var f=document.createElement("div");f.appendChild(d);f.style.width=b+"px";f.style.height=a+"px";f.style.position="absolute";f.style.left="0px";f.style.top="0px";f.style.overflow=
"hidden";var h=this.resize;this.resize=function(a,b){f.style.width=a+"px";f.style.height=b+"px";h(a,b)};this.getElement=function(){return f};var l="translate(0px, 0px)",g="matrix(1, 0, 0, 1, 0, 0)";this.translate=function(a,b){c.x=a;c.y=b;l="translate("+a+"px,"+b+"px)";f.style.transform=f.style.WebkitTransform=f.style.MozTransform=f.style.OTransform=f.style.msTransform=l+" "+g};this.move=function(a,b,d,h){c.parent!==a&&(c.parent&&delete c.parent.children[c.__unique_id],c.parent=a,a.children[c.__unique_id]=
c,a.getElement().appendChild(f));c.translate(b,d);c.z=h;f.style.zIndex=h};this.shade=function(a){c.alpha=a;f.style.opacity=a/255};this.dispose=function(){c.parent&&(delete c.parent.children[c.__unique_id],c.parent=null);f.parentNode&&f.parentNode.removeChild(f)};this.distort=function(a,b,d,h,n,r){c.matrix=[a,b,d,h,n,r];g="matrix("+a+","+b+","+d+","+h+","+n+","+r+")";f.style.transform=f.style.WebkitTransform=f.style.MozTransform=f.style.OTransform=f.style.msTransform=l+" "+g}};
Guacamole.Display.VisibleLayer.__next_id=0;Guacamole=Guacamole||{};Guacamole.InputStream=function(b,a){var c=this;this.index=a;this.onend=this.onblob=null;this.sendAck=function(a,f){b.sendAck(c.index,a,f)}};Guacamole=Guacamole||{};Guacamole.IntegerPool=function(){var b=this,a=[];this.next_int=0;this.next=function(){return 0<a.length?a.shift():b.next_int++};this.free=function(b){a.push(b)}};Guacamole=Guacamole||{};
Guacamole.Keyboard=function(b){function a(a,b){return a?a[b]||a[0]:null}function c(b,e,c){if(!b)return null;var f=b.indexOf("U+");if(0<=f)b=b.substring(f+2),b=String.fromCharCode(parseInt(b,16));else if(1!==b.length)return a(t[b],e);!0===c?b=b.toUpperCase():!1===c&&(b=b.toLowerCase());c=b.charCodeAt(0);return d(c)}function d(a){return 31>=a||127<=a&&159>=a?65280|a:0<=a&&255>=a?a:256<=a&&1114111>=a?16777216|a:null}function f(a){a=Guacamole.Keyboard.ModifierState.fromKeyboardEvent(a);g.modifiers.alt&&
!1===a.alt&&(g.release(65513),g.release(65514),g.release(65027));g.modifiers.shift&&!1===a.shift&&(g.release(65505),g.release(65506));g.modifiers.ctrl&&!1===a.ctrl&&(g.release(65507),g.release(65508));g.modifiers.meta&&!1===a.meta&&(g.release(65511),g.release(65512));g.modifiers.hyper&&!1===a.hyper&&(g.release(65515),g.release(65516));g.modifiers=a}function h(){var a=l();if(!a)return!1;var b;do b=a,a=l();while(null!==a);return b.defaultPrevented}function l(){var a=n[0];if(!a)return null;if(a instanceof
k){var b=null,e=[];a.reliable?(b=a.keysym,e=n.splice(0,1)):n[1]instanceof p?(b=n[1].keysym,e=n.splice(0,2)):n[1]&&(b=a.keysym,e=n.splice(0,1));if(0<e.length){if(b){g.modifiers.ctrl&&g.modifiers.alt&&!(65<=b&&90>=b||97<=b&&122>=b)&&(255>=b||16777216===(b&4278190080))&&(g.release(65507),g.release(65508),g.release(65513),g.release(65514));var c=!g.press(b);w[a.keyCode]=b;g.modifiers.meta&&65511!==b&&65512!==b&&g.release(b);for(b=0;b<e.length;b++)e[b].defaultPrevented=c}return a}}else return a instanceof
q&&((b=a.keysym)?(g.release(b),a.defaultPrevented=!0):g.reset()),n.shift();return null}var g=this;this.onkeyup=this.onkeydown=null;var m=function(){var a=this;this.timestamp=(new Date).getTime();this.defaultPrevented=!1;this.keysym=null;this.reliable=!1;this.getAge=function(){return(new Date).getTime()-a.timestamp}},k=function(b,e,d,f){m.apply(this);this.keyCode=b;this.keyIdentifier=e;this.key=d;this.location=f;if(this.keysym=c(d,f)||a(r[b],f))this.reliable=!0;if(d=!this.keysym)e?(d=e.indexOf("U+"),
-1===d?d=!0:(d=parseInt(e.substring(d+2),16),d=b!==d||65<=b&&90>=b||48<=b&&57>=b?!0:!1)):d=!1;d&&(this.keysym=c(e,f,g.modifiers.shift));e=!g.modifiers.ctrl&&!(navigator&&navigator.platform&&navigator.platform.match(/^mac/i));if(!g.modifiers.alt&&g.modifiers.ctrl||e&&g.modifiers.alt||g.modifiers.meta||g.modifiers.hyper)this.reliable=!0;w[b]=this.keysym};k.prototype=new m;var p=function(a){m.apply(this);this.charCode=a;this.keysym=d(a);this.reliable=!0};p.prototype=new m;var q=function(b,e,d,f){m.apply(this);
this.keyCode=b;this.keyIdentifier=e;this.key=d;this.location=f;this.keysym=w[b]||a(r[b],f)||c(d,f);this.reliable=!0};q.prototype=new m;var n=[],r={8:[65288],9:[65289],13:[65293],16:[65505,65505,65506],17:[65507,65507,65508],18:[65513,65513,65027],19:[65299],20:[65509],27:[65307],32:[32],33:[65365],34:[65366],35:[65367],36:[65360],37:[65361],38:[65362],39:[65363],40:[65364],45:[65379],46:[65535],91:[65515],92:[65383],93:null,112:[65470],113:[65471],114:[65472],115:[65473],116:[65474],117:[65475],118:[65476],
119:[65477],120:[65478],121:[65479],122:[65480],123:[65481],144:[65407],145:[65300],225:[65027]},t={Again:[65382],AllCandidates:[65341],Alphanumeric:[65328],Alt:[65513,65513,65027],Attn:[64782],AltGraph:[65027],ArrowDown:[65364],ArrowLeft:[65361],ArrowRight:[65363],ArrowUp:[65362],Backspace:[65288],CapsLock:[65509],Cancel:[65385],Clear:[65291],Convert:[65313],Copy:[64789],Crsel:[64796],CrSel:[64796],CodeInput:[65335],Compose:[65312],Control:[65507,65507,65508],ContextMenu:[65383],DeadGrave:[65104],
DeadAcute:[65105],DeadCircumflex:[65106],DeadTilde:[65107],DeadMacron:[65108],DeadBreve:[65109],DeadAboveDot:[65110],DeadUmlaut:[65111],DeadAboveRing:[65112],DeadDoubleacute:[65113],DeadCaron:[65114],DeadCedilla:[65115],DeadOgonek:[65116],DeadIota:[65117],DeadVoicedSound:[65118],DeadSemivoicedSound:[65119],Delete:[65535],Down:[65364],End:[65367],Enter:[65293],EraseEof:[64774],Escape:[65307],Execute:[65378],Exsel:[64797],ExSel:[64797],F1:[65470],F2:[65471],F3:[65472],F4:[65473],F5:[65474],F6:[65475],
F7:[65476],F8:[65477],F9:[65478],F10:[65479],F11:[65480],F12:[65481],F13:[65482],F14:[65483],F15:[65484],F16:[65485],F17:[65486],F18:[65487],F19:[65488],F20:[65489],F21:[65490],F22:[65491],F23:[65492],F24:[65493],Find:[65384],GroupFirst:[65036],GroupLast:[65038],GroupNext:[65032],GroupPrevious:[65034],FullWidth:null,HalfWidth:null,HangulMode:[65329],Hankaku:[65321],HanjaMode:[65332],Help:[65386],Hiragana:[65317],HiraganaKatakana:[65319],Home:[65360],Hyper:[65517,65517,65518],Insert:[65379],JapaneseHiragana:[65317],
JapaneseKatakana:[65318],JapaneseRomaji:[65316],JunjaMode:[65336],KanaMode:[65325],KanjiMode:[65313],Katakana:[65318],Left:[65361],Meta:[65511,65511,65512],ModeChange:[65406],NumLock:[65407],PageDown:[65366],PageUp:[65365],Pause:[65299],Play:[64790],PreviousCandidate:[65342],PrintScreen:[64797],Redo:[65382],Right:[65363],RomanCharacters:null,Scroll:[65300],Select:[65376],Separator:[65452],Shift:[65505,65505,65506],SingleCandidate:[65340],Super:[65515,65515,65516],Tab:[65289],Up:[65362],Undo:[65381],
Win:[65515],Zenkaku:[65320],ZenkakuHankaku:[65322]},u={65027:!0,65505:!0,65506:!0,65507:!0,65508:!0,65511:!0,65512:!0,65513:!0,65514:!0,65515:!0,65516:!0};this.modifiers=new Guacamole.Keyboard.ModifierState;this.pressed={};var v={},w={},e=null,y=null;this.press=function(a){if(null!==a){if(!g.pressed[a]&&(g.pressed[a]=!0,g.onkeydown)){var b=g.onkeydown(a);v[a]=b;window.clearTimeout(e);window.clearInterval(y);u[a]||(e=window.setTimeout(function(){y=window.setInterval(function(){g.onkeyup(a);g.onkeydown(a)},
50)},500));return b}return v[a]||!1}};this.release=function(a){if(g.pressed[a]&&(delete g.pressed[a],window.clearTimeout(e),window.clearInterval(y),null!==a&&g.onkeyup))g.onkeyup(a)};this.reset=function(){for(var a in g.pressed)g.release(parseInt(a));n=[]};var A=function(a){return"location"in a?a.location:"keyLocation"in a?a.keyLocation:0};b.addEventListener("keydown",function(a){if(g.onkeydown){var b;window.event?b=window.event.keyCode:a.which&&(b=a.which);f(a);229!==b&&(b=new k(b,a.keyIdentifier,
a.key,A(a)),n.push(b),h()&&a.preventDefault())}},!0);b.addEventListener("keypress",function(a){if(g.onkeydown||g.onkeyup){var b;window.event?b=window.event.keyCode:a.which&&(b=a.which);f(a);b=new p(b);n.push(b);h()&&a.preventDefault()}},!0);b.addEventListener("keyup",function(a){if(g.onkeyup){a.preventDefault();var b;window.event?b=window.event.keyCode:a.which&&(b=a.which);f(a);a=new q(b,a.keyIdentifier,a.key,A(a));n.push(a);h()}},!0)};
Guacamole.Keyboard.ModifierState=function(){this.hyper=this.meta=this.alt=this.ctrl=this.shift=!1};Guacamole.Keyboard.ModifierState.fromKeyboardEvent=function(b){var a=new Guacamole.Keyboard.ModifierState;a.shift=b.shiftKey;a.ctrl=b.ctrlKey;a.alt=b.altKey;a.meta=b.metaKey;b.getModifierState&&(a.hyper=b.getModifierState("OS")||b.getModifierState("Super")||b.getModifierState("Hyper")||b.getModifierState("Win"));return a};Guacamole=Guacamole||{};
Guacamole.Layer=function(b,a){function c(a,b,c,f){a=c+a;b=f+b;d.resize(a>d.width?a:d.width,b>d.height?b:d.height)}var d=this,f=document.createElement("canvas"),h=f.getContext("2d");h.save();var l=!0,g=0,m={1:"destination-in",2:"destination-out",4:"source-in",6:"source-atop",8:"source-out",9:"destination-atop",10:"xor",11:"destination-over",12:"copy",14:"source-over",15:"lighter"};this.autosize=!1;this.width=b;this.height=a;this.getCanvas=function(){return f};this.resize=function(a,b){if(a!==d.width||
b!==d.height){var c=null;0!==d.width&&0!==d.height&&(c=document.createElement("canvas"),c.width=d.width,c.height=d.height,c.getContext("2d").drawImage(f,0,0,d.width,d.height,0,0,d.width,d.height));var m=h.globalCompositeOperation;f.width=a;f.height=b;c&&h.drawImage(c,0,0,d.width,d.height,0,0,d.width,d.height);h.globalCompositeOperation=m;d.width=a;d.height=b;g=0;h.save()}};this.drawImage=function(a,b,f){d.autosize&&c(a,b,f.width,f.height);h.drawImage(f,a,b)};this.transfer=function(a,b,f,g,m,l,u,v){var w=
a.getCanvas();if(!(b>=w.width||f>=w.height)&&(b+g>w.width&&(g=w.width-b),f+m>w.height&&(m=w.height-f),0!==g&&0!==m)){d.autosize&&c(l,u,g,m);a=a.getCanvas().getContext("2d").getImageData(b,f,g,m);b=h.getImageData(l,u,g,m);for(f=0;f<g*m*4;f+=4){var w=new Guacamole.Layer.Pixel(a.data[f],a.data[f+1],a.data[f+2],a.data[f+3]),e=new Guacamole.Layer.Pixel(b.data[f],b.data[f+1],b.data[f+2],b.data[f+3]);v(w,e);b.data[f]=e.red;b.data[f+1]=e.green;b.data[f+2]=e.blue;b.data[f+3]=e.alpha}h.putImageData(b,l,u)}};
this.put=function(a,b,f,g,m,l,u){var v=a.getCanvas();b>=v.width||f>=v.height||(b+g>v.width&&(g=v.width-b),f+m>v.height&&(m=v.height-f),0!==g&&0!==m&&(d.autosize&&c(l,u,g,m),a=a.getCanvas().getContext("2d").getImageData(b,f,g,m),h.putImageData(a,l,u)))};this.copy=function(a,b,f,g,m,l,u){a=a.getCanvas();b>=a.width||f>=a.height||(b+g>a.width&&(g=a.width-b),f+m>a.height&&(m=a.height-f),0!==g&&0!==m&&(d.autosize&&c(l,u,g,m),h.drawImage(a,b,f,g,m,l,u,g,m)))};this.moveTo=function(a,b){l&&(h.beginPath(),
l=!1);d.autosize&&c(a,b,0,0);h.moveTo(a,b)};this.lineTo=function(a,b){l&&(h.beginPath(),l=!1);d.autosize&&c(a,b,0,0);h.lineTo(a,b)};this.arc=function(a,b,f,g,m,t){l&&(h.beginPath(),l=!1);d.autosize&&c(a,b,0,0);h.arc(a,b,f,g,m,t)};this.curveTo=function(a,b,f,g,m,t){l&&(h.beginPath(),l=!1);d.autosize&&c(m,t,0,0);h.bezierCurveTo(a,b,f,g,m,t)};this.close=function(){h.closePath();l=!0};this.rect=function(a,b,f,g){l&&(h.beginPath(),l=!1);d.autosize&&c(a,b,f,g);h.rect(a,b,f,g)};this.clip=function(){h.clip();
l=!0};this.strokeColor=function(a,b,c,d,f,g,m){h.lineCap=a;h.lineJoin=b;h.lineWidth=c;h.strokeStyle="rgba("+d+","+f+","+g+","+m/255+")";h.stroke();l=!0};this.fillColor=function(a,b,c,d){h.fillStyle="rgba("+a+","+b+","+c+","+d/255+")";h.fill();l=!0};this.strokeLayer=function(a,b,c,d){h.lineCap=a;h.lineJoin=b;h.lineWidth=c;h.strokeStyle=h.createPattern(d.getCanvas(),"repeat");h.stroke();l=!0};this.fillLayer=function(a){h.fillStyle=h.createPattern(a.getCanvas(),"repeat");h.fill();l=!0};this.push=function(){h.save();
g++};this.pop=function(){0<g&&(h.restore(),g--)};this.reset=function(){for(;0<g;)h.restore(),g--;h.restore();h.save();h.beginPath();l=!1};this.setTransform=function(a,b,c,d,f,g){h.setTransform(a,b,c,d,f,g)};this.transform=function(a,b,c,d,f,g){h.transform(a,b,c,d,f,g)};this.setChannelMask=function(a){h.globalCompositeOperation=m[a]};this.setMiterLimit=function(a){h.miterLimit=a};f.width=b;f.height=a;f.style.zIndex=-1};Guacamole.Layer.ROUT=2;Guacamole.Layer.ATOP=6;Guacamole.Layer.XOR=10;
Guacamole.Layer.ROVER=11;Guacamole.Layer.OVER=14;Guacamole.Layer.PLUS=15;Guacamole.Layer.RIN=1;Guacamole.Layer.IN=4;Guacamole.Layer.OUT=8;Guacamole.Layer.RATOP=9;Guacamole.Layer.SRC=12;Guacamole.Layer.Pixel=function(b,a,c,d){this.red=b;this.green=a;this.blue=c;this.alpha=d};Guacamole=Guacamole||{};
Guacamole.Mouse=function(b){function a(a){a.stopPropagation();a.preventDefault&&a.preventDefault();a.returnValue=!1}function c(){h=f.touchMouseThreshold}function d(b){var c=b.deltaY||-b.wheelDeltaY||-b.wheelDelta;c?1===b.deltaMode?c=b.deltaY*f.PIXELS_PER_LINE:2===b.deltaMode&&(c=b.deltaY*f.PIXELS_PER_PAGE):c=b.detail*f.PIXELS_PER_LINE;for(l+=c;l<=-f.scrollThreshold;)f.onmousedown&&(f.currentState.up=!0,f.onmousedown(f.currentState)),f.onmouseup&&(f.currentState.up=!1,f.onmouseup(f.currentState)),l+=
f.scrollThreshold;for(;l>=f.scrollThreshold;)f.onmousedown&&(f.currentState.down=!0,f.onmousedown(f.currentState)),f.onmouseup&&(f.currentState.down=!1,f.onmouseup(f.currentState)),l-=f.scrollThreshold;a(b)}var f=this;this.touchMouseThreshold=3;this.scrollThreshold=120;this.PIXELS_PER_LINE=40;this.PIXELS_PER_PAGE=640;this.currentState=new Guacamole.Mouse.State(0,0,!1,!1,!1,!1,!1);this.onmouseout=this.onmousemove=this.onmouseup=this.onmousedown=null;var h=0,l=0;b.addEventListener("contextmenu",function(b){a(b)},
!1);b.addEventListener("mousemove",function(c){a(c);if(h)h--;else if(f.currentState.fromClientPosition(b,c.clientX,c.clientY),f.onmousemove)f.onmousemove(f.currentState)},!1);b.addEventListener("mousedown",function(b){a(b);if(!h){switch(b.button){case 0:f.currentState.left=!0;break;case 1:f.currentState.middle=!0;break;case 2:f.currentState.right=!0}if(f.onmousedown)f.onmousedown(f.currentState)}},!1);b.addEventListener("mouseup",function(b){a(b);if(!h){switch(b.button){case 0:f.currentState.left=
!1;break;case 1:f.currentState.middle=!1;break;case 2:f.currentState.right=!1}if(f.onmouseup)f.onmouseup(f.currentState)}},!1);b.addEventListener("mouseout",function(c){c||(c=window.event);for(var d=c.relatedTarget||c.toElement;d;){if(d===b)return;d=d.parentNode}a(c);if(f.currentState.left||f.currentState.middle||f.currentState.right)if(f.currentState.left=!1,f.currentState.middle=!1,f.currentState.right=!1,f.onmouseup)f.onmouseup(f.currentState);if(f.onmouseout)f.onmouseout()},!1);b.addEventListener("selectstart",
function(b){a(b)},!1);b.addEventListener("touchmove",c,!1);b.addEventListener("touchstart",c,!1);b.addEventListener("touchend",c,!1);b.addEventListener("DOMMouseScroll",d,!1);b.addEventListener("mousewheel",d,!1);b.addEventListener("wheel",d,!1);var g=function(){var a=document.createElement("div");if(!("cursor"in a.style))return!1;try{a.style.cursor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX///+nxBvIAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==) 0 0, auto"}catch(b){return!1}return/\burl\([^()]*\)\s+0\s+0\b/.test(a.style.cursor||
"")}();this.setCursor=function(a,c,d){return g?(a=a.toDataURL("image/png"),b.style.cursor="url("+a+") "+c+" "+d+", auto",!0):!1}};
Guacamole.Mouse.State=function(b,a,c,d,f,h,l){var g=this;this.x=b;this.y=a;this.left=c;this.middle=d;this.right=f;this.up=h;this.down=l;this.fromClientPosition=function(a,b,c){g.x=b-a.offsetLeft;g.y=c-a.offsetTop;for(a=a.offsetParent;a&&a!==document.body;)g.x-=a.offsetLeft-a.scrollLeft,g.y-=a.offsetTop-a.scrollTop,a=a.offsetParent;a&&(b=document.body.scrollTop||document.documentElement.scrollTop,g.x-=a.offsetLeft-(document.body.scrollLeft||document.documentElement.scrollLeft),g.y-=a.offsetTop-b)}};
Guacamole.Mouse.Touchpad=function(b){var a=this;this.scrollThreshold=20*(window.devicePixelRatio||1);this.clickTimingThreshold=250;this.clickMoveThreshold=10*(window.devicePixelRatio||1);this.currentState=new Guacamole.Mouse.State(0,0,!1,!1,!1,!1,!1);this.onmousemove=this.onmouseup=this.onmousedown=null;var c=0,d=0,f=0,h=0,l=0,g={1:"left",2:"right",3:"middle"},m=!1,k=null;b.addEventListener("touchend",function(b){b.preventDefault();if(m&&0===b.touches.length){b=(new Date).getTime();var d=g[c];if(a.currentState[d]){a.currentState[d]=
!1;if(a.onmouseup)a.onmouseup(a.currentState);k&&(window.clearTimeout(k),k=null)}if(b-h<=a.clickTimingThreshold&&l<a.clickMoveThreshold){a.currentState[d]=!0;if(a.onmousedown)a.onmousedown(a.currentState);k=window.setTimeout(function(){a.currentState[d]=!1;if(a.onmouseup)a.onmouseup(a.currentState);m=!1},a.clickTimingThreshold)}k||(m=!1)}},!1);b.addEventListener("touchstart",function(a){a.preventDefault();c=Math.min(a.touches.length,3);k&&(window.clearTimeout(k),k=null);m||(m=!0,a=a.touches[0],d=
a.clientX,f=a.clientY,h=(new Date).getTime(),l=0)},!1);b.addEventListener("touchmove",function(g){g.preventDefault();g=g.touches[0];var k=g.clientX-d,m=g.clientY-f;l+=Math.abs(k)+Math.abs(m);if(1===c){var r=1+l/((new Date).getTime()-h);a.currentState.x+=k*r;a.currentState.y+=m*r;0>a.currentState.x?a.currentState.x=0:a.currentState.x>=b.offsetWidth&&(a.currentState.x=b.offsetWidth-1);0>a.currentState.y?a.currentState.y=0:a.currentState.y>=b.offsetHeight&&(a.currentState.y=b.offsetHeight-1);if(a.onmousemove)a.onmousemove(a.currentState);
d=g.clientX;f=g.clientY}else if(2===c&&Math.abs(m)>=a.scrollThreshold){k=0<m?"down":"up";a.currentState[k]=!0;if(a.onmousedown)a.onmousedown(a.currentState);a.currentState[k]=!1;if(a.onmouseup)a.onmouseup(a.currentState);d=g.clientX;f=g.clientY}},!1)};
Guacamole.Mouse.Touchscreen=function(b){function a(a){if(!g.currentState[a]&&(g.currentState[a]=!0,g.onmousedown))g.onmousedown(g.currentState)}function c(a){if(g.currentState[a]&&(g.currentState[a]=!1,g.onmouseup))g.onmouseup(g.currentState)}function d(a,c){g.currentState.fromClientPosition(b,a,c);if(g.onmousemove)g.onmousemove(g.currentState)}function f(a){var b=a.touches[0]||a.changedTouches[0];a=b.clientX-k;b=b.clientY-p;return Math.sqrt(a*a+b*b)>=g.clickMoveThreshold}function h(a){a=a.touches[0];
m=!0;k=a.clientX;p=a.clientY}function l(){window.clearTimeout(q);window.clearTimeout(n);m=!1}var g=this,m=!1,k=null,p=null,q=null,n=null;this.scrollThreshold=20*(window.devicePixelRatio||1);this.clickTimingThreshold=250;this.clickMoveThreshold=16*(window.devicePixelRatio||1);this.longPressThreshold=500;this.currentState=new Guacamole.Mouse.State(0,0,!1,!1,!1,!1,!1);this.onmousemove=this.onmouseup=this.onmousedown=null;b.addEventListener("touchend",function(b){m&&(0!==b.touches.length||1!==b.changedTouches.length?
l():(window.clearTimeout(n),c("left"),f(b)||(b.preventDefault(),g.currentState.left||(b=b.changedTouches[0],d(b.clientX,b.clientY),a("left"),q=window.setTimeout(function(){c("left");l()},g.clickTimingThreshold)))))},!1);b.addEventListener("touchstart",function(b){1!==b.touches.length?l():(b.preventDefault(),h(b),window.clearTimeout(q),n=window.setTimeout(function(){var f=b.touches[0];d(f.clientX,f.clientY);a("right");c("right");l()},g.longPressThreshold))},!1);b.addEventListener("touchmove",function(a){m&&
(f(a)&&window.clearTimeout(n),1!==a.touches.length?l():g.currentState.left&&(a.preventDefault(),a=a.touches[0],d(a.clientX,a.clientY)))},!1)};Guacamole=Guacamole||{};
Guacamole.OnScreenKeyboard=function(b){var a=this,c={},d={},f=[],h=function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},l=function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(/([^ ]+)[ ]*/g,function(a,c){return c===b?"":a})},g=0,m=function(a,b,c,d){this.width=b;this.height=c;this.scale=function(e){a.style.width=b*e+"px";a.style.height=c*e+"px";d&&(a.style.lineHeight=c*e+"px",a.style.fontSize=e+"px")}},k=function(b){b=a.keys[b];if(!b)return null;for(var d=b.length-
1;0<=d;d--){var f=b[d],g;a:{g=f.requires;for(var e=0;e<g.length;e++)if(!(g[e]in c)){g=!1;break a}g=!0}if(g)return f}return null},p=function(b,f){if(!a.disabled&&!d[b]){h(f,"guac-keyboard-pressed");var g=k(b);if(g.modifier){var m="guac-keyboard-modifier-"+r(g.modifier),e=c[g.modifier];if(e){if(l(n,m),delete c[g.modifier],a.onkeyup)a.onkeyup(e)}else if(h(n,m),c[g.modifier]=g.keysym,a.onkeydown)a.onkeydown(g.keysym)}else if(a.onkeydown)a.onkeydown(g.keysym);d[b]=!0}},q=function(b,c){if(!a.disabled&&
d[b]){l(c,"guac-keyboard-pressed");var f=k(b);if(!f.modifier&&a.onkeyup)a.onkeyup(f.keysym);d[b]=!1}},n=document.createElement("div");n.className="guac-keyboard";n.onselectstart=n.onmousemove=n.onmouseup=n.onmousedown=function(a){g&&g--;a.stopPropagation();return!1};this.touchMouseThreshold=3;this.onkeyup=this.onkeydown=null;this.layout=new Guacamole.OnScreenKeyboard.Layout(b);this.getElement=function(){return n};this.resize=function(b){b=Math.floor(10*b/a.layout.width)/10;for(var c=0;c<f.length;c++)f[c].scale(b)};
this.keys=function(a){var c={},d;for(d in b.keys){var f=d,e;e=d;var g=a[d];if(g instanceof Array){for(var h=[],k=0;k<g.length;k++)h.push(new Guacamole.OnScreenKeyboard.Key(g[k],e));e=h}else e="number"===typeof g?[new Guacamole.OnScreenKeyboard.Key({name:e,keysym:g})]:"string"===typeof g?[new Guacamole.OnScreenKeyboard.Key({name:e,title:g})]:[new Guacamole.OnScreenKeyboard.Key(g,e)];c[f]=e}return c}(b.keys);var r=function(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[^A-Za-z0-9]+/g,"-").toLowerCase()};
(function u(b,c,e){var d,k=document.createElement("div");e&&h(k,"guac-keyboard-"+r(e));if(c instanceof Array)for(h(k,"guac-keyboard-group"),d=0;d<c.length;d++)u(k,c[d]);else if(c instanceof Object){h(k,"guac-keyboard-group");var l=Object.keys(c).sort();for(d=0;d<l.length;d++)e=l[d],u(k,c[e],e)}else if("number"===typeof c)h(k,"guac-keyboard-gap"),f.push(new m(k,c,c));else if("string"===typeof c){d=c;1===d.length&&(d="0x"+d.charCodeAt(0).toString(16));h(k,"guac-keyboard-key-container");var n=document.createElement("div");
n.className="guac-keyboard-key guac-keyboard-key-"+r(d);if(e=a.keys[c])for(d=0;d<e.length;d++){var l=e[d],x=document.createElement("div");x.className="guac-keyboard-cap";x.textContent=l.title;for(var z=0;z<l.requires.length;z++){var B=l.requires[z];h(x,"guac-keyboard-requires-"+r(B));h(n,"guac-keyboard-uses-"+r(B))}n.appendChild(x)}k.appendChild(n);f.push(new m(k,a.layout.keyWidths[c]||1,1,!0));d=function(a){a.preventDefault();0===g&&q(c,n)};n.addEventListener("touchstart",function(b){b.preventDefault();
g=a.touchMouseThreshold;p(c,n)},!0);n.addEventListener("touchend",function(b){b.preventDefault();g=a.touchMouseThreshold;q(c,n)},!0);n.addEventListener("mousedown",function(a){a.preventDefault();0===g&&p(c,n)},!0);n.addEventListener("mouseup",d,!0);n.addEventListener("mouseout",d,!0)}b.appendChild(k)})(n,b.layout)};Guacamole.OnScreenKeyboard.Layout=function(b){this.language=b.language;this.type=b.type;this.keys=b.keys;this.layout=b.layout;this.width=b.width;this.keyWidths=b.keyWidths||{}};
Guacamole.OnScreenKeyboard.Key=function(b,a){this.name=a||b.name;this.title=b.title||this.name;var c;(c=b.keysym)||((c=this.title)&&1===c.length?(c=c.charCodeAt(0),c=0<=c&&255>=c?c:256<=c&&1114111>=c?16777216|c:null):c=null);this.keysym=c;this.modifier=b.modifier;this.requires=b.requires||[]};Guacamole=Guacamole||{};Guacamole.OutputStream=function(b,a){var c=this;this.index=a;this.onack=null;this.sendBlob=function(a){b.sendBlob(c.index,a)};this.sendEnd=function(){b.endStream(c.index)}};Guacamole=Guacamole||{};
Guacamole.Parser=function(){var b=this,a="",c=[],d=-1,f=0;this.receive=function(h){4096<f&&d>=f&&(a=a.substring(f),d-=f,f=0);for(a+=h;d<a.length;){if(d>=f){h=a.substring(f,d);var l=a.substring(d,d+1);c.push(h);if(";"==l){h=c.shift();if(null!=b.oninstruction)b.oninstruction(h,c);c.length=0}else if(","!=l)throw Error("Illegal terminator.");f=d+1}h=a.indexOf(".",f);if(-1!=h){l=parseInt(a.substring(d+1,h));if(isNaN(l))throw Error("Non-numeric character in element length.");f=h+1;d=f+l}else{f=a.length;
break}}};this.oninstruction=null};Guacamole=Guacamole||{};Guacamole.Status=function(b,a){var c=this;this.code=b;this.message=a;this.isError=function(){return 0>c.code||255<c.code}};Guacamole.Status.Code={SUCCESS:0,UNSUPPORTED:256,SERVER_ERROR:512,SERVER_BUSY:513,UPSTREAM_TIMEOUT:514,UPSTREAM_ERROR:515,RESOURCE_NOT_FOUND:516,RESOURCE_CONFLICT:517,CLIENT_BAD_REQUEST:768,CLIENT_UNAUTHORIZED:769,CLIENT_FORBIDDEN:771,CLIENT_TIMEOUT:776,CLIENT_OVERRUN:781,CLIENT_BAD_TYPE:783,CLIENT_TOO_MANY:797};Guacamole=Guacamole||{};
Guacamole.StringReader=function(b){var a=this;b=new Guacamole.ArrayBufferReader(b);var c=0,d=0;b.ondata=function(b){var h="";b=new Uint8Array(b);for(var l=0;l<b.length;l++){var g=b[l];0===c?127===(g|127)?h+=String.fromCharCode(g):223===(g|31)?(d=g&31,c=1):239===(g|15)?(d=g&15,c=2):247===(g|7)?(d=g&7,c=3):h+="\ufffd":191===(g|63)?(d=d<<6|g&63,c--,0===c&&(h+=String.fromCharCode(d))):(c=0,h+="\ufffd")}if(a.ontext)a.ontext(h)};b.onend=function(){if(a.onend)a.onend()};this.onend=this.ontext=null};Guacamole=Guacamole||{};
Guacamole.StringWriter=function(b){function a(b){var c,d;if(127>=b)c=0,d=1;else if(2047>=b)c=192,d=2;else if(65535>=b)c=224,d=3;else if(2097151>=b)c=240,d=4;else{a(65533);return}var f=d;if(l+f>=h.length){var q=new Uint8Array(2*(l+f));q.set(h);h=q}l+=f;f=l-1;for(q=1;q<d;q++)h[f--]=128|b&63,b>>=6;h[f]=c|b}function c(b){for(var c=0;c<b.length;c++){var d=b.charCodeAt(c);a(d)}if(0<l)return b=h.subarray(0,l),l=0,b}var d=this,f=new Guacamole.ArrayBufferWriter(b),h=new Uint8Array(8192),l=0;f.onack=function(a){if(d.onack)d.onack(a)};
this.sendText=function(a){f.sendData(c(a))};this.sendEnd=function(){f.sendEnd()};this.onack=null};Guacamole=Guacamole||{};Guacamole.Tunnel=function(){this.connect=function(b){};this.disconnect=function(){};this.sendMessage=function(b){};this.state=Guacamole.Tunnel.State.CONNECTING;this.receiveTimeout=15E3;this.oninstruction=this.onstatechange=this.onerror=null};Guacamole.Tunnel.State={CONNECTING:0,OPEN:1,CLOSED:2};
Guacamole.HTTPTunnel=function(b){function a(){window.clearTimeout(u);u=window.setTimeout(function(){c(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))},g.receiveTimeout)}function c(a){if(g.state!==Guacamole.Tunnel.State.CLOSED){if(a.code!==Guacamole.Status.Code.SUCCESS&&g.onerror&&(g.state===Guacamole.Tunnel.State.CONNECTING||a.code!==Guacamole.Status.Code.RESOURCE_NOT_FOUND))g.onerror(a);g.state=Guacamole.Tunnel.State.CLOSED;r=!1;if(g.onstatechange)g.onstatechange(g.state)}}
function d(){if(g.state===Guacamole.Tunnel.State.OPEN)if(0<t.length){r=!0;var a=new XMLHttpRequest;a.open("POST",q+m);a.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");a.onreadystatechange=function(){4===a.readyState&&(200!==a.status?f(a):d())};a.send(t);t=""}else r=!1}function f(a){var b=parseInt(a.getResponseHeader("Guacamole-Status-Code"));a=a.getResponseHeader("Guacamole-Error-Message");c(new Guacamole.Status(b,a))}function h(b){function c(){if(g.state!==Guacamole.Tunnel.State.OPEN)null!==
d&&clearInterval(d);else if(!(2>b.readyState)){var m;try{m=b.status}catch(t){m=200}k||200!==m||(k=l());if(3===b.readyState||4===b.readyState)if(a(),1===n&&(3!==b.readyState||d?4!==b.readyState||d||clearInterval(d):d=setInterval(c,30)),0===b.status)g.disconnect();else if(200!==b.status)f(b);else{var u;try{u=b.responseText}catch(t){return}for(;p<u.length;){if(p>=q){m=u.substring(q,p);var v=u.substring(p,p+1);r.push(m);if(";"===v){m=r.shift();if(g.oninstruction)g.oninstruction(m,r);r.length=0}q=p+1}m=
u.indexOf(".",q);if(-1!==m){v=parseInt(u.substring(p+1,m));if(0===v){d||clearInterval(d);b.onreadystatechange=null;b.abort();k&&h(k);break}q=m+1;p=q+v}else{q=u.length;break}}}}}var d=null,k=null,m=0,p=-1,q=0,r=[];b.onreadystatechange=1===n?function(){3===b.readyState&&(m++,2<=m&&(n=0,b.onreadystatechange=c));c()}:c;c()}function l(){var a=new XMLHttpRequest;a.open("GET",p+m+":"+v++);a.send(null);return a}var g=this,m,k=b+"?connect",p=b+"?read:",q=b+"?write:",n=1,r=!1,t="",u=null;this.sendMessage=function(){function a(b){b=
new String(b);return b.length+"."+b}if(g.state===Guacamole.Tunnel.State.OPEN&&0!==arguments.length){for(var b=a(arguments[0]),c=1;c<arguments.length;c++)b+=","+a(arguments[c]);t+=b+";";r||d()}};var v=0;this.connect=function(b){a();var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===c.readyState)if(200!==c.status)f(c);else{a();m=c.responseText;g.state=Guacamole.Tunnel.State.OPEN;if(g.onstatechange)g.onstatechange(g.state);h(l())}};c.open("POST",k,!0);c.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");
c.send(b)};this.disconnect=function(){c(new Guacamole.Status(Guacamole.Status.Code.SUCCESS,"Manually closed."))}};Guacamole.HTTPTunnel.prototype=new Guacamole.Tunnel;
Guacamole.WebSocketTunnel=function(b){function a(){d.receiveTimeout&&(window.clearTimeout(h),h=window.setTimeout(function(){c(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))},d.receiveTimeout))}function c(a){if(d.state!==Guacamole.Tunnel.State.CLOSED){if(a.code!==Guacamole.Status.Code.SUCCESS&&d.onerror)d.onerror(a);d.state=Guacamole.Tunnel.State.CLOSED;if(d.onstatechange)d.onstatechange(d.state);f.close()}}var d=this,f=null,h=null,l={"http:":"ws:","https:":"wss:"};
if("ws:"!==b.substring(0,3)&&"wss:"!==b.substring(0,4))if(l=l[window.location.protocol],"/"===b.substring(0,1))b=l+"//"+window.location.host+b;else{var g=window.location.pathname.lastIndexOf("/"),g=window.location.pathname.substring(0,g+1);b=l+"//"+window.location.host+g+b}this.sendMessage=function(a){function b(a){a=new String(a);return a.length+"."+a}if(d.state===Guacamole.Tunnel.State.OPEN&&0!==arguments.length){for(var c=b(arguments[0]),g=1;g<arguments.length;g++)c+=","+b(arguments[g]);f.send(c+
";")}};this.connect=function(g){a();f=new WebSocket(g?b+"?"+g:b,"guacamole");f.onopen=function(b){a();d.state=Guacamole.Tunnel.State.OPEN;if(d.onstatechange)d.onstatechange(d.state)};f.onclose=function(a){c(new Guacamole.Status(parseInt(a.reason),a.reason))};f.onerror=function(a){c(new Guacamole.Status(Guacamole.Status.Code.SERVER_ERROR,a.data))};f.onmessage=function(b){a();b=b.data;var f=0,g,h=[];do{var l=b.indexOf(".",f);-1!==l?(g=parseInt(b.substring(g+1,l)),f=l+1,g=f+g):c(new Guacamole.Status(Guacamole.Status.Code.SERVER_ERROR,
"Incomplete instruction."));f=b.substring(f,g);l=b.substring(g,g+1);h.push(f);if(";"===l){f=h.shift();if(d.oninstruction)d.oninstruction(f,h);h.length=0}f=g+1}while(f<b.length)}};this.disconnect=function(){c(new Guacamole.Status(Guacamole.Status.Code.SUCCESS,"Manually closed."))}};Guacamole.WebSocketTunnel.prototype=new Guacamole.Tunnel;
Guacamole.ChainedTunnel=function(b){function a(b){function g(){var c=f.shift();c&&(b.onerror=null,b.oninstruction=null,b.onstatechange=null,a(c));return c}function h(){b.onstatechange=c.onstatechange;b.oninstruction=c.oninstruction;b.onerror=c.onerror}c.disconnect=b.disconnect;c.sendMessage=b.sendMessage;b.onstatechange=function(a){switch(a){case Guacamole.Tunnel.State.OPEN:h();if(c.onstatechange)c.onstatechange(a);break;case Guacamole.Tunnel.State.CLOSED:if(!g()&&c.onstatechange)c.onstatechange(a)}};
b.oninstruction=function(a,b){h();if(c.oninstruction)c.oninstruction(a,b)};b.onerror=function(a){if(!g()&&c.onerror)c.onerror(a)};b.connect(d)}for(var c=this,d,f=[],h=0;h<arguments.length;h++)f.push(arguments[h]);this.connect=function(b){d=b;if(b=f.shift())a(b);else if(c.onerror)c.onerror(Guacamole.Status.Code.SERVER_ERROR,"No tunnels to try.")}};Guacamole.ChainedTunnel.prototype=new Guacamole.Tunnel;Guacamole=Guacamole||{};Guacamole.API_VERSION="0.9.5";var DEBUG_LOG=!1;function debugLog(b){DEBUG_LOG&&console.log(b)}var serverAddress="170.75.163.216:6004";var en_us_qwerty_keyboard={language:"en_US",type:"qwerty",width:22,keys:{Back:65288,Tab:65289,Enter:65293,Esc:65307,Home:65360,PgUp:65365,PgDn:65366,End:65367,Ins:65379,F1:65470,F2:65471,F3:65472,F4:65473,F5:65474,F6:65475,F7:65476,F8:65477,F9:65478,F10:65479,F11:65480,F12:65481,Del:65535,Space:" ",Left:[{title:"\u2190",keysym:65361}],Up:[{title:"\u2191",keysym:65362}],Right:[{title:"\u2192",keysym:65363}],Down:[{title:"\u2193",keysym:65364}],Menu:[{title:"Menu",modifier:"super",keysym:65383}],LShift:[{title:"Shift",
modifier:"shift",keysym:65505}],RShift:[{title:"Shift",modifier:"shift",keysym:65506}],LCtrl:[{title:"Ctrl",modifier:"control",keysym:65507}],RCtrl:[{title:"Ctrl",modifier:"control",keysym:65508}],Caps:[{title:"Caps",modifier:"caps",keysym:65509}],LAlt:[{title:"Alt",modifier:"alt",keysym:65513}],RAlt:[{title:"Alt",modifier:"alt",keysym:65514}],Super:[{title:"Super",modifier:"super",keysym:65515}],"`":[{title:"`",requires:[]},{title:"~",requires:["shift"]}],1:[{title:"1",requires:[]},{title:"!",requires:["shift"]}],
2:[{title:"2",requires:[]},{title:"@",requires:["shift"]}],3:[{title:"3",requires:[]},{title:"#",requires:["shift"]}],4:[{title:"4",requires:[]},{title:"$",requires:["shift"]}],5:[{title:"5",requires:[]},{title:"%",requires:["shift"]}],6:[{title:"6",requires:[]},{title:"^",requires:["shift"]}],7:[{title:"7",requires:[]},{title:"&",requires:["shift"]}],8:[{title:"8",requires:[]},{title:"*",requires:["shift"]}],9:[{title:"9",requires:[]},{title:"(",requires:["shift"]}],0:[{title:"0",requires:[]},{title:")",
requires:["shift"]}],"-":[{title:"-",requires:[]},{title:"_",requires:["shift"]}],"=":[{title:"=",requires:[]},{title:"+",requires:["shift"]}],",":[{title:",",requires:[]},{title:"<",requires:["shift"]}],".":[{title:".",requires:[]},{title:">",requires:["shift"]}],"/":[{title:"/",requires:[]},{title:"?",requires:["shift"]}],"[":[{title:"[",requires:[]},{title:"{",requires:["shift"]}],"]":[{title:"]",requires:[]},{title:"}",requires:["shift"]}],"\\":[{title:"\\",requires:[]},{title:"|",requires:["shift"]}],
";":[{title:";",requires:[]},{title:":",requires:["shift"]}],"'":[{title:"'",requires:[]},{title:'"',requires:["shift"]}],q:[{title:"q",requires:[]},{title:"Q",requires:["caps"]},{title:"Q",requires:["shift"]},{title:"q",requires:["caps","shift"]}],w:[{title:"w",requires:[]},{title:"W",requires:["caps"]},{title:"W",requires:["shift"]},{title:"w",requires:["caps","shift"]}],e:[{title:"e",requires:[]},{title:"E",requires:["caps"]},{title:"E",requires:["shift"]},{title:"e",requires:["caps","shift"]}],
r:[{title:"r",requires:[]},{title:"R",requires:["caps"]},{title:"R",requires:["shift"]},{title:"r",requires:["caps","shift"]}],t:[{title:"t",requires:[]},{title:"T",requires:["caps"]},{title:"T",requires:["shift"]},{title:"t",requires:["caps","shift"]}],y:[{title:"y",requires:[]},{title:"Y",requires:["caps"]},{title:"Y",requires:["shift"]},{title:"y",requires:["caps","shift"]}],u:[{title:"u",requires:[]},{title:"U",requires:["caps"]},{title:"U",requires:["shift"]},{title:"u",requires:["caps","shift"]}],
i:[{title:"i",requires:[]},{title:"I",requires:["caps"]},{title:"I",requires:["shift"]},{title:"i",requires:["caps","shift"]}],o:[{title:"o",requires:[]},{title:"O",requires:["caps"]},{title:"O",requires:["shift"]},{title:"o",requires:["caps","shift"]}],p:[{title:"p",requires:[]},{title:"P",requires:["caps"]},{title:"P",requires:["shift"]},{title:"p",requires:["caps","shift"]}],a:[{title:"a",requires:[]},{title:"A",requires:["caps"]},{title:"A",requires:["shift"]},{title:"a",requires:["caps","shift"]}],
s:[{title:"s",requires:[]},{title:"S",requires:["caps"]},{title:"S",requires:["shift"]},{title:"s",requires:["caps","shift"]}],d:[{title:"d",requires:[]},{title:"D",requires:["caps"]},{title:"D",requires:["shift"]},{title:"d",requires:["caps","shift"]}],f:[{title:"f",requires:[]},{title:"F",requires:["caps"]},{title:"F",requires:["shift"]},{title:"f",requires:["caps","shift"]}],g:[{title:"g",requires:[]},{title:"G",requires:["caps"]},{title:"G",requires:["shift"]},{title:"g",requires:["caps","shift"]}],
h:[{title:"h",requires:[]},{title:"H",requires:["caps"]},{title:"H",requires:["shift"]},{title:"h",requires:["caps","shift"]}],j:[{title:"j",requires:[]},{title:"J",requires:["caps"]},{title:"J",requires:["shift"]},{title:"j",requires:["caps","shift"]}],k:[{title:"k",requires:[]},{title:"K",requires:["caps"]},{title:"K",requires:["shift"]},{title:"k",requires:["caps","shift"]}],l:[{title:"l",requires:[]},{title:"L",requires:["caps"]},{title:"L",requires:["shift"]},{title:"l",requires:["caps","shift"]}],
z:[{title:"z",requires:[]},{title:"Z",requires:["caps"]},{title:"Z",requires:["shift"]},{title:"z",requires:["caps","shift"]}],x:[{title:"x",requires:[]},{title:"X",requires:["caps"]},{title:"X",requires:["shift"]},{title:"x",requires:["caps","shift"]}],c:[{title:"c",requires:[]},{title:"C",requires:["caps"]},{title:"C",requires:["shift"]},{title:"c",requires:["caps","shift"]}],v:[{title:"v",requires:[]},{title:"V",requires:["caps"]},{title:"V",requires:["shift"]},{title:"v",requires:["caps","shift"]}],
b:[{title:"b",requires:[]},{title:"B",requires:["caps"]},{title:"B",requires:["shift"]},{title:"b",requires:["caps","shift"]}],n:[{title:"n",requires:[]},{title:"N",requires:["caps"]},{title:"N",requires:["shift"]},{title:"n",requires:["caps","shift"]}],m:[{title:"m",requires:[]},{title:"M",requires:["caps"]},{title:"M",requires:["shift"]},{title:"m",requires:["caps","shift"]}]},layout:[["Esc",.7,"F1","F2","F3","F4",.7,"F5","F6","F7","F8",.7,"F9","F10","F11","F12"],[.1],{main:{alpha:["` 1 2 3 4 5 6 7 8 9 0 - = Back".split(" "),
"Tab q w e r t y u i o p [ ] \\".split(" "),"Caps a s d f g h j k l ; ' Enter".split(" "),"LShift z x c v b n m , . / RShift".split(" "),"LCtrl Super LAlt Space RAlt Menu RCtrl".split(" ")],movement:[["Ins","Home","PgUp"],["Del","End","PgDn"],[1],["Up"],["Left","Down","Right"]]}}],keyWidths:{Back:2,Tab:1.5,"\\":1.5,Caps:1.85,Enter:2.25,LShift:2.1,RShift:3.1,LCtrl:1.6,Super:1.6,LAlt:1.6,Space:6.1,RAlt:1.6,Menu:1.6,RCtrl:1.6,Ins:1.6,Home:1.6,PgUp:1.6,Del:1.6,End:1.6,PgDn:1.6}};var DEBUG_NO_TIMEOUT=!1,DEBUG_NO_NSFW=!1,DEBUG_NO_CONNECT=!1,maxChatMessage=100,chatSound="notify",hasTurn=!1,turnInt=null,focused=!1,display=null,tunnel=null,guac=null,mouse=null,keyboard=null,supportedAudio=null,chatSoundOn=!0,osk=null,nsfwWarn=!0,users=[],usersWaiting=0,usersData={},usersList={},username=null,connected=!1;function getRankClass(b){switch(b){case 1:return"user";case 2:return"dev";case 3:return"admin"}return""}
function addTableRow(b,a,c){var d=document.createElement("LI");d.className="list-group-item";d.innerHTML=a;var f=getRankClass(c[0]);f&&(d.className+=" "+f);1===c[1]?d.className+=" has-turn":1<c[1]&&(d.className+=" waiting-turn");a==username&&(d.className+=" current-user");b.appendChild(d)}
function displayTable(){$("#user-count").html("Users Online: "+users.length);var b=$("#online-users").empty().get(0);if(0<usersWaiting){for(var a=1;a<usersWaiting+1;a++)for(var c=0;c<users.length;c++){var d=users[c],f=usersData[d];f[1]===a&&addTableRow(b,d,f)}for(c=0;c<users.length;c++)d=users[c],f=usersData[d],0===f[1]&&addTableRow(b,d,f)}else for(c=0;c<users.length;c++)d=users[c],f=usersData[d],addTableRow(b,d,f)}
function chatMessage(b,a){var c=$("#chat-panel").get(0),d=c.offsetHeight+c.scrollTop>=c.scrollHeight;$("#chat-box").append('<li><div><span class="username" href="#">'+b+'</span><span class="spacer">\u25b8</span>'+a+"</div></li>");d&&(c.scrollTop=c.scrollHeight);playSound()}function getCookie(b){b+="=";for(var a=document.cookie.split(";"),c=0;c<a.length;c++){for(var d=a[c];" "==d.charAt(0);)d=d.substring(1);if(0==d.indexOf(b))return d.substring(b.length,d.length)}return""}
function setCookie(b,a,c){var d=new Date;d.setTime(d.getTime()+864E5*c);c="expires="+d.toUTCString();document.cookie=b+"="+a+"; "+c}
function initSound(){if(document.createElement("audio").canPlayType){var b=document.createElement("audio");b.canPlayType("audio/mpeg;").replace(/no/,"")?supportedAudio=new Audio(chatSound+".mp3"):b.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,"")?supportedAudio=new Audio(chatSound+".ogg"):b.canPlayType('audio/mp4; codecs="mp4a.40.2"').replace(/no/,"")&&(supportedAudio=new Audio(chatSound+".m4a"))}}
function setChatSoundOn(b){(chatSoundOn=b)?$("#chat-sound-btn").children().first().removeClass("glyphicon-volume-off").addClass("glyphicon-volume-up"):$("#chat-sound-btn").children().first().removeClass("glyphicon-volume-up").addClass("glyphicon-volume-off")}function playSound(){chatSoundOn&&(null!==supportedAudio?supportedAudio.play():($("#chat-sound bgsound").remove(),$("<bgsound/>").attr({src:"notify.mp3",loop:1,autostart:!0}).appendTo("#chat-sound")))}
function hideScreen(b){if(b){b=document.getElementById("display");b.setAttribute("style","filter: blur(15px);-webkit-filter: blur(15px)");var a=0!=b.style.length;a&&(a=void 0===document.documentMode||9<document.documentMode);a||b.setAttribute("style","background-color: white;")}else display.removeAttribute("style")}
function waitingTimer(b,a,c){var d="",f=function(){a-=1E3;var f=Math.floor(a/1E3);0>=f?(clearInterval(turnInt),$("#status").html("")):(d=3>d.length?d+".":"",f=b+" in ~"+f+" seconds",c&&(f+=d),$("#status").html(f))};f();turnInt=setInterval(f,1E3)}function setFocus(b){(focused=b)?(keyboard.onkeydown=function(a){hasTurn&&guac.sendKeyEvent(1,a)},keyboard.onkeyup=function(a){hasTurn&&guac.sendKeyEvent(0,a)}):keyboard.onkeydown=keyboard.onkeyup=null}
function activateOSK(b){osk.disabled=!b;var a=$(osk.getElement()).find("div.guac-keyboard-key");b?a.removeClass("guac-keyboard-disabled"):a.addClass("guac-keyboard-disabled")}function displayLoading(b){b?($("#loading").show(),$("#status").html("Loading...")):($("#loading").hide(),$("#status").html(""))}
$(document).ready(function(){$("#nsfw-cont-btn").click(function(){nsfwWarn=!1;$("#warning").hide();hideScreen(!1);$("#no-warn-chkbox").prop("checked")&&setCookie("no-nsfw-warn","1",365)});osk=new Guacamole.OnScreenKeyboard(en_us_qwerty_keyboard);activateOSK(!1);$("#kbd-keys").append(osk.getElement());osk.resize($("#kbd-container").width());osk.onkeydown=function(b){hasTurn&&guac.sendKeyEvent(1,b)};osk.onkeyup=function(b){hasTurn&&guac.sendKeyEvent(0,b)};$("#osk-btn").click(function(){var b=$("#kbd-outer");
b.is(":visible")?b.hide("fast"):b.show("fast")});$(window).resize(function(){osk&&osk.resize($("#kbd-container").width())});$("#username-modal").on("show.bs.modal",function(b){$("#username-box").val(username)});$("#username-ok-btn").click(function(){var b=$("#username-box").val().trim();b&&($("#username-modal").modal("hide"),debugLog("New Username: "+b),tunnel.state==Guacamole.Tunnel.State.OPEN&&tunnel.sendMessage("rename",b))});$("#username-box").keydown(function(b){13==b.which&&(b.preventDefault(),
$("#username-ok-btn").trigger("click"))});$("#chat-input").keypress(function(b){13==b.which?(b.preventDefault(),$("#chat-send-btn").trigger("click")):this.value.length>=maxChatMessage&&b.preventDefault()}).on("input",function(){this.value.length>maxChatMessage&&(this.value=this.value.substr(0,maxChatMessage))});$("#chat-send-btn").click(function(){var b=$("#chat-input"),a=b.val().trim();guac.currentState===Guacamole.Client.CONNECTED&&a&&(tunnel.sendMessage("chat",a),b.val(""))});$("#chat-sound-btn").click(function(){setChatSoundOn(!chatSoundOn);
setCookie("chat-sound",chatSoundOn?"1":"0",365)});initSound();setChatSoundOn("0"!=getCookie("chat-sound"));DEBUG_NO_NSFW||"1"==getCookie("no-nsfw-warn")?(nsfwWarn=!1,document.getElementById("warning").style.display="none"):hideScreen(!0);display=document.getElementById("display");tunnel=new Guacamole.WebSocketTunnel("ws://"+serverAddress+"/");DEBUG_NO_TIMEOUT&&(tunnel.receiveTimeout=0);guac=new Guacamole.Client(tunnel);guac.getDisplay().getElement().addEventListener("click",function(){hasTurn||nsfwWarn||
tunnel.sendMessage("turn")});guac.onerror=function(b){debugLog(b)};tunnel.onstatechange=function(b){b==Guacamole.Tunnel.State.CLOSED?(displayLoading(!0),$("#username-btn").prop("disabled",!0),activateOSK(!1),b=guac.getDisplay().getElement(),b.parentNode==display&&display.removeChild(b),connected=!1,users=[],usersWaiting=0,usersData={},username=null,setFocus(!1),hasTurn=!1,turnInt&&(clearInterval(turnInt),$("#status").html("")),display.className="",displayTable(),$("#chat-send-btn").prop("disabled",
!0),$("#chat-input").prop("disabled",!0),b=document.getElementById("chat-user"),b.style.display="none",b.innerHTML="",setTimeout(function(){tunnel.state=Guacamole.Tunnel.State.CONNECTING;guac.connect()},1E4)):b==Guacamole.Tunnel.State.OPEN&&(displayLoading(!1),display.appendChild(guac.getDisplay().getElement()),$("#chat-send-btn").prop("disabled",!1),$("#chat-input").prop("disabled",!1),document.getElementById("chat-user").style.display="",null==username?tunnel.sendMessage("rename",getCookie("username"),
"1"):tunnel.sendMessage("rename",getCookie("username")))};guac.onturn=function(b){debugLog("Turn: ");debugLog(b);for(var a=0;a<users.length;a++)usersData[users[a]][1]=0;var c=1E3*Math.round(parseInt(b[0])/1E3);usersWaiting=parseInt(b[1]);for(var d=usersWaiting+2,a=2;a<d;a++)usersData[b[a]][1]=a-1;2<d&&b[2]==username?(hasTurn=!0,display.className="focused",turnInt&&(clearInterval(turnInt),$("#status").html("")),waitingTimer("Your turn expires",c,!1)):b.length>d?(hasTurn=!1,display.className="waiting",
turnInt&&(clearInterval(turnInt),$("#status").html("")),waitingTimer("Waiting for turn",c,!0)):(hasTurn&&(hasTurn=!1,display.className=""),turnInt&&(clearInterval(turnInt),$("#status").html("")));activateOSK(hasTurn);displayTable()};guac.onrename=function(b){if(0==b[0]){var a=null==username;if(!a)for(var c=0;c<users.length;c++)if(users[c]==username){users.splice(c,1);break}username=b[2];$("#username-btn").prop("disabled",!1);$("#chat-user").html(username);-1==$.inArray(username,users)&&users.push(username);
usersData[username]=[0,0];setCookie("username",username,365);connected||tunnel.sendMessage("connect",0);a&&1==b[1]?alert("That username is already taken."):2==b[1]&&alert("Usernames can contain only numbers, letters, spaces, dashes, underscores, and dots, and it must be between 3 and 20 characters.")}else if(1==b[0]){a=b[1];for(c=0;c<users.length;c++)if(users[c]==a){users[c]=b[2];break}usersData[b[2]]=usersData[a];delete usersData[a]}displayTable()};guac.onconnect=function(b){1==b[0]&&(connected=
!0)};guac.onadduser=function(b){debugLog("Add user: ");debugLog(b);for(var a=2*parseInt(b[0])+1,c=1;c<a;c+=2)users.push(b[c]),usersData[b[c]]=[parseInt(b[c+1]),0];displayTable()};guac.onremuser=function(b){debugLog("Remove user: ");debugLog(b);for(var a=parseInt(b[0])+1,c=1;c<a;c++){for(var d=b[c],f=0;f<users.length;f++)if(users[f]==d){users.splice(f,1);break}delete usersData[d]}displayTable()};guac.onchat=function(b){for(var a=0;a<b.length;a+=2)chatMessage(b[a]||"SERVER",b[a+1])};document.addEventListener("mousedown",
function(b){focused&&setFocus(!1)});mouse=new Guacamole.Mouse(guac.getDisplay().getElement());mouse.onmousedown=function(b){focused||setFocus(!0);hasTurn&&guac.sendMouseState(b)};mouse.onmouseup=mouse.onmousemove=function(b){hasTurn&&guac.sendMouseState(b)};keyboard=new Guacamole.Keyboard(document);DEBUG_NO_CONNECT||(displayLoading(!0),guac.connect())});window.onunload=function(){guac.disconnect()};

}
