!function(){"use strict";const e="/collab-vm/";var t={DEBUG:!1,DEBUG_NO_TIMEOUT:!1,DEBUG_NO_NSFW:!1,DEBUG_NO_CONNECT:!1,DEBUG_VM_LIST:!1,DEBUG_VM_LIST:!1,debugLog:function(){this.DEBUG&&console.log.apply(null,arguments)},rootDir:e,chatSound:e+"notify",serverAddress:window.location.host,additionalNodes:[]},n={language:"en_US",type:"qwerty",width:22,keys:{Back:65288,Tab:65289,Enter:65293,Esc:65307,Home:65360,PgUp:65365,PgDn:65366,End:65367,Ins:65379,F1:65470,F2:65471,F3:65472,F4:65473,F5:65474,F6:65475,F7:65476,F8:65477,F9:65478,F10:65479,F11:65480,F12:65481,Del:65535,Space:" ",Left:[{title:"←",keysym:65361}],Up:[{title:"↑",keysym:65362}],Right:[{title:"→",keysym:65363}],Down:[{title:"↓",keysym:65364}],Menu:[{title:"Menu",modifier:"super",keysym:65383}],LShift:[{title:"Shift",modifier:"shift",keysym:65505}],RShift:[{title:"Shift",modifier:"shift",keysym:65506}],LCtrl:[{title:"Ctrl",modifier:"control",keysym:65507}],RCtrl:[{title:"Ctrl",modifier:"control",keysym:65508}],Caps:[{title:"Caps",modifier:"caps",keysym:65509}],LAlt:[{title:"Alt",modifier:"alt",keysym:65513}],RAlt:[{title:"Alt",modifier:"alt",keysym:65514}],Super:[{title:"Super",modifier:"super",keysym:65515}],"`":[{title:"`",requires:[]},{title:"~",requires:["shift"]}],1:[{title:"1",requires:[]},{title:"!",requires:["shift"]}],2:[{title:"2",requires:[]},{title:"@",requires:["shift"]}],3:[{title:"3",requires:[]},{title:"#",requires:["shift"]}],4:[{title:"4",requires:[]},{title:"$",requires:["shift"]}],5:[{title:"5",requires:[]},{title:"%",requires:["shift"]}],6:[{title:"6",requires:[]},{title:"^",requires:["shift"]}],7:[{title:"7",requires:[]},{title:"&",requires:["shift"]}],8:[{title:"8",requires:[]},{title:"*",requires:["shift"]}],9:[{title:"9",requires:[]},{title:"(",requires:["shift"]}],0:[{title:"0",requires:[]},{title:")",requires:["shift"]}],"-":[{title:"-",requires:[]},{title:"_",requires:["shift"]}],"=":[{title:"=",requires:[]},{title:"+",requires:["shift"]}],",":[{title:",",requires:[]},{title:"<",requires:["shift"]}],".":[{title:".",requires:[]},{title:">",requires:["shift"]}],"/":[{title:"/",requires:[]},{title:"?",requires:["shift"]}],"[":[{title:"[",requires:[]},{title:"{",requires:["shift"]}],"]":[{title:"]",requires:[]},{title:"}",requires:["shift"]}],"\\":[{title:"\\",requires:[]},{title:"|",requires:["shift"]}],";":[{title:";",requires:[]},{title:":",requires:["shift"]}],"'":[{title:"'",requires:[]},{title:'"',requires:["shift"]}],q:[{title:"q",requires:[]},{title:"Q",requires:["caps"]},{title:"Q",requires:["shift"]},{title:"q",requires:["caps","shift"]}],w:[{title:"w",requires:[]},{title:"W",requires:["caps"]},{title:"W",requires:["shift"]},{title:"w",requires:["caps","shift"]}],e:[{title:"e",requires:[]},{title:"E",requires:["caps"]},{title:"E",requires:["shift"]},{title:"e",requires:["caps","shift"]}],r:[{title:"r",requires:[]},{title:"R",requires:["caps"]},{title:"R",requires:["shift"]},{title:"r",requires:["caps","shift"]}],t:[{title:"t",requires:[]},{title:"T",requires:["caps"]},{title:"T",requires:["shift"]},{title:"t",requires:["caps","shift"]}],y:[{title:"y",requires:[]},{title:"Y",requires:["caps"]},{title:"Y",requires:["shift"]},{title:"y",requires:["caps","shift"]}],u:[{title:"u",requires:[]},{title:"U",requires:["caps"]},{title:"U",requires:["shift"]},{title:"u",requires:["caps","shift"]}],i:[{title:"i",requires:[]},{title:"I",requires:["caps"]},{title:"I",requires:["shift"]},{title:"i",requires:["caps","shift"]}],o:[{title:"o",requires:[]},{title:"O",requires:["caps"]},{title:"O",requires:["shift"]},{title:"o",requires:["caps","shift"]}],p:[{title:"p",requires:[]},{title:"P",requires:["caps"]},{title:"P",requires:["shift"]},{title:"p",requires:["caps","shift"]}],a:[{title:"a",requires:[]},{title:"A",requires:["caps"]},{title:"A",requires:["shift"]},{title:"a",requires:["caps","shift"]}],s:[{title:"s",requires:[]},{title:"S",requires:["caps"]},{title:"S",requires:["shift"]},{title:"s",requires:["caps","shift"]}],d:[{title:"d",requires:[]},{title:"D",requires:["caps"]},{title:"D",requires:["shift"]},{title:"d",requires:["caps","shift"]}],f:[{title:"f",requires:[]},{title:"F",requires:["caps"]},{title:"F",requires:["shift"]},{title:"f",requires:["caps","shift"]}],g:[{title:"g",requires:[]},{title:"G",requires:["caps"]},{title:"G",requires:["shift"]},{title:"g",requires:["caps","shift"]}],h:[{title:"h",requires:[]},{title:"H",requires:["caps"]},{title:"H",requires:["shift"]},{title:"h",requires:["caps","shift"]}],j:[{title:"j",requires:[]},{title:"J",requires:["caps"]},{title:"J",requires:["shift"]},{title:"j",requires:["caps","shift"]}],k:[{title:"k",requires:[]},{title:"K",requires:["caps"]},{title:"K",requires:["shift"]},{title:"k",requires:["caps","shift"]}],l:[{title:"l",requires:[]},{title:"L",requires:["caps"]},{title:"L",requires:["shift"]},{title:"l",requires:["caps","shift"]}],z:[{title:"z",requires:[]},{title:"Z",requires:["caps"]},{title:"Z",requires:["shift"]},{title:"z",requires:["caps","shift"]}],x:[{title:"x",requires:[]},{title:"X",requires:["caps"]},{title:"X",requires:["shift"]},{title:"x",requires:["caps","shift"]}],c:[{title:"c",requires:[]},{title:"C",requires:["caps"]},{title:"C",requires:["shift"]},{title:"c",requires:["caps","shift"]}],v:[{title:"v",requires:[]},{title:"V",requires:["caps"]},{title:"V",requires:["shift"]},{title:"v",requires:["caps","shift"]}],b:[{title:"b",requires:[]},{title:"B",requires:["caps"]},{title:"B",requires:["shift"]},{title:"b",requires:["caps","shift"]}],n:[{title:"n",requires:[]},{title:"N",requires:["caps"]},{title:"N",requires:["shift"]},{title:"n",requires:["caps","shift"]}],m:[{title:"m",requires:[]},{title:"M",requires:["caps"]},{title:"M",requires:["shift"]},{title:"m",requires:["caps","shift"]}]},layout:[["Esc",.7,"F1","F2","F3","F4",.7,"F5","F6","F7","F8",.7,"F9","F10","F11","F12"],[.1],{main:{alpha:[["`","1","2","3","4","5","6","7","8","9","0","-","=","Back"],["Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\"],["Caps","a","s","d","f","g","h","j","k","l",";","'","Enter"],["LShift","z","x","c","v","b","n","m",",",".","/","RShift"],["LCtrl","Super","LAlt","Space","RAlt","Menu","RCtrl"]],movement:[["Ins","Home","PgUp"],["Del","End","PgDn"],[1],["Up"],["Left","Down","Right"]]}}],keyWidths:{Back:2,Tab:1.5,"\\":1.5,Caps:1.85,Enter:2.25,LShift:2.1,RShift:3.1,LCtrl:1.6,Super:1.6,LAlt:1.6,Space:6.1,RAlt:1.6,Menu:1.6,RCtrl:1.6,Ins:1.6,Home:1.6,PgUp:1.6,Del:1.6,End:1.6,PgDn:1.6}};"object"!=typeof JSON&&(JSON={}),function(){function e(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var t=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r,a,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},o;function s(e){return n.lastIndex=0,n.test(e)?'"'+e.replace(n,(function(e){var t=i[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function u(e,t){var n,i,l,c,d,h=r,f=t[e];switch(f&&"object"==typeof f&&"function"==typeof f.toJSON&&(f=f.toJSON(e)),"function"==typeof o&&(f=o.call(t,e,f)),typeof f){case"string":return s(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":return String(f);case"object":if(!f)return"null";if(r+=a,d=[],"[object Array]"===Object.prototype.toString.apply(f)){for(c=f.length,n=0;n<c;n+=1)d[n]=u(n,f)||"null";return l=0===d.length?"[]":r?"[\n"+r+d.join(",\n"+r)+"\n"+h+"]":"["+d.join(",")+"]",r=h,l}if(o&&"object"==typeof o)for(c=o.length,n=0;n<c;n+=1)"string"==typeof o[n]&&(l=u(i=o[n],f))&&d.push(s(i)+(r?": ":":")+l);else for(i in f)Object.prototype.hasOwnProperty.call(f,i)&&(l=u(i,f))&&d.push(s(i)+(r?": ":":")+l);return l=0===d.length?"{}":r?"{\n"+r+d.join(",\n"+r)+"\n"+h+"}":"{"+d.join(",")+"}",r=h,l}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(r="",a="","number"==typeof n)for(i=0;i<n;i+=1)a+=" ";else"string"==typeof n&&(a=n);if(o=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return u("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(e,n){var r;function a(e,t){var r,i,o=e[t];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(void 0!==(i=a(o,r))?o[r]=i:delete o[r]);return n.call(e,t,o)}if(e=String(e),t.lastIndex=0,t.test(e)&&(e=e.replace(t,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return r=eval("("+e+")"),"function"==typeof n?a({"":r},""):r;throw new SyntaxError("JSON.parse")})}();var r={};function a(){var e;return(e=e||{}).Display=function(){var t=this,n=0,r=0,a=1,i=document.createElement("div");i.style.position="relative",i.style.width=n+"px",i.style.height=r+"px",i.style.transformOrigin=i.style.webkitTransformOrigin=i.style.MozTransformOrigin=i.style.OTransformOrigin=i.style.msTransformOrigin="0 0";var o=new e.Display.VisibleLayer(n,r),s=new e.Display.VisibleLayer(0,0);s.setChannelMask(e.Layer.SRC),i.appendChild(o.getElement()),i.appendChild(s.getElement());var u=document.createElement("div");u.style.position="relative",u.style.width=n*a+"px",u.style.height=r*a+"px",u.appendChild(i),this.cursorHotspotX=0,this.cursorHotspotY=0,this.cursorX=0,this.cursorY=0,this.onresize=null,this.oncursor=null;var l=[],c=[];function d(){for(var e=0;e<c.length;){var t=c[e];if(!t.isReady())break;t.flush(),e++}c.splice(0,e)}function h(e,t){this.isReady=function(){for(var e=0;e<t.length;e++)if(t[e].blocked)return!1;return!0},this.flush=function(){for(var n=0;n<t.length;n++)t[n].execute();e&&e()}}function f(e,t){var n=this;this.blocked=t,this.unblock=function(){n.blocked&&(n.blocked=!1,d())},this.execute=function(){e&&e()}}function p(e,t){var n=new f(e,t);return l.push(n),n}this.getElement=function(){return u},this.getWidth=function(){return n},this.getHeight=function(){return r},this.getDefaultLayer=function(){return o},this.getCursorLayer=function(){return s},this.createLayer=function(){var t=new e.Display.VisibleLayer(n,r);return t.move(o,0,0,0),t},this.createBuffer=function(){var t=new e.Layer(0,0);return t.autosize=1,t},this.flush=function(e){c.push(new h(e,l)),l=[],d()},this.setCursor=function(e,n,r,a,i,o,u){p((function(){t.cursorHotspotX=e,t.cursorHotspotY=n,s.resize(o,u),s.copy(r,a,i,o,u,0,0),t.moveCursor(t.cursorX,t.cursorY),t.oncursor&&t.oncursor(s.getCanvas(),e,n)}))},this.showCursor=function(e){var t=s.getElement(),n=t.parentNode;!1===e?n&&n.removeChild(t):n!==i&&i.appendChild(t)},this.moveCursor=function(e,n){s.translate(e-t.cursorHotspotX,n-t.cursorHotspotY),t.cursorX=e,t.cursorY=n},this.resize=function(e,s,l){p((function(){e.resize(s,l),e===o&&(n=s,r=l,i.style.width=n+"px",i.style.height=r+"px",u.style.width=n*a+"px",u.style.height=r*a+"px",t.onresize&&t.onresize(s,l))}))},this.drawImage=function(e,t,n,r){p((function(){e.drawImage(t,n,r)}))},this.draw=function(e,t,n,r){var a=p((function(){e.drawImage(t,n,i)}),!0),i=new Image;i.onload=a.unblock,i.src=r},this.play=function(e,t,n,r){var a=document.createElement("video");a.type=t,a.src=r,a.addEventListener("play",(function(){!function t(){e.drawImage(0,0,a),a.ended||window.setTimeout(t,20)}()}),!1),p(a.play)},this.transfer=function(e,t,n,r,a,i,o,s,u){p((function(){i.transfer(e,t,n,r,a,o,s,u)}))},this.put=function(e,t,n,r,a,i,o,s){p((function(){i.put(e,t,n,r,a,o,s)}))},this.copy=function(e,t,n,r,a,i,o,s){p((function(){i.copy(e,t,n,r,a,o,s)}))},this.moveTo=function(e,t,n){p((function(){e.moveTo(t,n)}))},this.lineTo=function(e,t,n){p((function(){e.lineTo(t,n)}))},this.arc=function(e,t,n,r,a,i,o){p((function(){e.arc(t,n,r,a,i,o)}))},this.curveTo=function(e,t,n,r,a,i,o){p((function(){e.curveTo(t,n,r,a,i,o)}))},this.close=function(e){p((function(){e.close()}))},this.rect=function(e,t,n,r,a){p((function(){e.rect(t,n,r,a)}))},this.clip=function(e){p((function(){e.clip()}))},this.strokeColor=function(e,t,n,r,a,i,o,s){p((function(){e.strokeColor(t,n,r,a,i,o,s)}))},this.fillColor=function(e,t,n,r,a){p((function(){e.fillColor(t,n,r,a)}))},this.strokeLayer=function(e,t,n,r,a){p((function(){e.strokeLayer(t,n,r,a)}))},this.fillLayer=function(e,t){p((function(){e.fillLayer(t)}))},this.push=function(e){p((function(){e.push()}))},this.pop=function(e){p((function(){e.pop()}))},this.reset=function(e){p((function(){e.reset()}))},this.setTransform=function(e,t,n,r,a,i,o){p((function(){e.setTransform(t,n,r,a,i,o)}))},this.transform=function(e,t,n,r,a,i,o){p((function(){e.transform(t,n,r,a,i,o)}))},this.setChannelMask=function(e,t){p((function(){e.setChannelMask(t)}))},this.setMiterLimit=function(e,t){p((function(){e.setMiterLimit(t)}))},this.scale=function(e){i.style.transform=i.style.WebkitTransform=i.style.MozTransform=i.style.OTransform=i.style.msTransform="scale("+e+","+e+")",a=e,u.style.width=n*a+"px",u.style.height=r*a+"px"},this.getScale=function(){return a},this.flatten=function(){var e=document.createElement("canvas");e.width=o.width,e.height=o.height;var t=e.getContext("2d");return function e(n,r,a){if(n.width>0&&n.height>0){var i=t.globalAlpha;t.globalAlpha*=n.alpha/255,t.drawImage(n.getCanvas(),r,a);for(var o=function(e){var t=[];for(var n in e.children)t.push(e.children[n]);return t.sort((function(e,t){var n=e.z-t.z;if(0!==n)return n;var r=e.getElement(),a=t.getElement().compareDocumentPosition(r);return a&Node.DOCUMENT_POSITION_PRECEDING?-1:a&Node.DOCUMENT_POSITION_FOLLOWING?1:0})),t}(n),s=0;s<o.length;s++){var u=o[s];e(u,r+u.x,a+u.y)}t.globalAlpha=i}}(o,0,0),e}},e.Display.VisibleLayer=function(t,n){e.Layer.apply(this,[t,n]);var r=this;this.__unique_id=e.Display.VisibleLayer.__next_id++,this.alpha=255,this.x=0,this.y=0,this.z=0,this.matrix=[1,0,0,1,0,0],this.parent=null,this.children={};var a=r.getCanvas();a.style.position="absolute",a.style.left="0px",a.style.top="0px";var i=document.createElement("div");i.appendChild(a),i.style.width=t+"px",i.style.height=n+"px",i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.overflow="hidden";var o=this.resize;this.resize=function(e,t){i.style.width=e+"px",i.style.height=t+"px",o(e,t)},this.getElement=function(){return i};var s="translate(0px, 0px)",u="matrix(1, 0, 0, 1, 0, 0)";this.translate=function(e,t){r.x=e,r.y=t,s="translate("+e+"px,"+t+"px)",i.style.transform=i.style.WebkitTransform=i.style.MozTransform=i.style.OTransform=i.style.msTransform=s+" "+u},this.move=function(e,t,n,a){r.parent!==e&&(r.parent&&delete r.parent.children[r.__unique_id],r.parent=e,e.children[r.__unique_id]=r,e.getElement().appendChild(i));r.translate(t,n),r.z=a,i.style.zIndex=a},this.shade=function(e){r.alpha=e,i.style.opacity=e/255},this.dispose=function(){r.parent&&(delete r.parent.children[r.__unique_id],r.parent=null),i.parentNode&&i.parentNode.removeChild(i)},this.distort=function(e,t,n,a,o,l){r.matrix=[e,t,n,a,o,l],u="matrix("+e+","+t+","+n+","+a+","+o+","+l+")",i.style.transform=i.style.WebkitTransform=i.style.MozTransform=i.style.OTransform=i.style.msTransform=s+" "+u}},e.Display.VisibleLayer.__next_id=0,(e=e||{}).Parser=function(){var e=this,t="",n=[],r=-1,a=0;this.receive=function(i){for(a>4096&&r>=a&&(t=t.substring(a),r-=a,a=0),t+=i;r<t.length;){if(r>=a){var o=t.substring(a,r),s=t.substring(r,r+1);if(n.push(o),";"==s){var u=n.shift();null!=e.oninstruction&&e.oninstruction(u,n),n.length=0}else if(","!=s)throw new Error("Illegal terminator.");a=r+1}var l=t.indexOf(".",a);if(-1==l){a=t.length;break}var c=parseInt(t.substring(r+1,l));if(isNaN(c))throw new Error("Non-numeric character in element length.");r=(a=l+1)+c}},this.oninstruction=null},(e=e||{}).Client=function(t){var n=this,r=2,a=3,i=0,o={0:"butt",1:"round",2:"square"},s={0:"bevel",1:"miter",2:"round"},u=new e.Display,l={},c=[],d=[],h=[],f=new e.IntegerPool,p=[];function g(e){e!=i&&(i=e,n.onstatechange&&n.onstatechange(i))}function m(){return i==a||i==r}function v(e){var t=l[e];return t||(t=0===e?u.getDefaultLayer():e>0?u.createLayer():u.createBuffer(),l[e]=t),t}this.getDisplay=function(){return u},this.sendSize=function(e,n){m()&&t.sendMessage("size",e,n)},this.sendKeyEvent=function(e,n){m()&&t.sendMessage("key",n,e)},this.sendMouseState=function(e){if(m()){u.moveCursor(Math.floor(e.x),Math.floor(e.y));var n=0;e.left&&(n|=1),e.middle&&(n|=2),e.right&&(n|=4),e.up&&(n|=8),e.down&&(n|=16),t.sendMessage("mouse",Math.floor(e.x),Math.floor(e.y),n)}},this.setClipboard=function(t){if(m()){for(var r=n.createClipboardStream("text/plain"),a=new e.StringWriter(r),i=0;i<t.length;i+=4096)a.sendText(t.substring(i,i+4096));a.sendEnd()}},this.createFileStream=function(r,a){var i=f.next();t.sendMessage("file",i,r,a);var o=p[i]=new e.OutputStream(n,i),s=o.sendEnd;return o.sendEnd=function(){s(),f.free(i),delete p[i]},o},this.createPipeStream=function(r,a){var i=f.next();t.sendMessage("pipe",i,r,a);var o=p[i]=new e.OutputStream(n,i),s=o.sendEnd;return o.sendEnd=function(){s(),f.free(i),delete p[i]},o},this.createClipboardStream=function(r){var a=f.next();t.sendMessage("clipboard",a,r);var i=p[a]=new e.OutputStream(n,a),o=i.sendEnd;return i.sendEnd=function(){o(),f.free(a),delete p[a]},i},this.sendAck=function(e,n,r){m()&&t.sendMessage("ack",e,n,r)},this.sendBlob=function(e,n){m()&&t.sendMessage("blob",e,n)},this.endStream=function(e){m()&&t.sendMessage("end",e)},this.onstatechange=null,this.onname=null,this.onerror=null,this.onclipboard=null,this.onfile=null,this.onpipe=null,this.onsync=null,this.onturn=null,this.onchat=null,this.onrename=null,this.onadduser=null,this.onremuser=null,this.onconnect=null,this.onlist=null,this.onvote=null,this.onaction=null;var y={"miter-limit":function(e,t){u.setMiterLimit(e,parseFloat(t))}},b={turn:function(e){n.onturn&&n.onturn(e)},rename:function(e){n.onrename&&n.onrename(e)},chat:function(e){n.onchat&&n.onchat(e)},admin:function(e){n.onadmin&&n.onadmin(e)},adduser:function(e){n.onadduser&&n.onadduser(e)},remuser:function(e){n.onremuser&&n.onremuser(e)},connect:function(e){n.onconnect&&n.onconnect(e)},list:function(e){n.onlist&&n.onlist(e)},vote:function(e){n.onvote&&n.onvote(e)},action:function(e){n.onaction&&n.onaction(e)},file:function(e){n.onfile&&n.onfile(e)},nop:function(){t.sendMessage("nop")},ack:function(t){var n=parseInt(t[0]),r=t[1],a=parseInt(t[2]),i=p[n];i&&(i.onack&&i.onack(new e.Status(a,r)),a>=256&&(f.free(n),delete p[n]))},arc:function(e){var t=v(parseInt(e[0])),n=parseInt(e[1]),r=parseInt(e[2]),a=parseInt(e[3]),i=parseFloat(e[4]),o=parseFloat(e[5]),s=parseInt(e[6]);u.arc(t,n,r,a,i,o,0!=s)},audio:function(t){var r,a,i=parseInt(t[0]),o=(r=parseInt(t[1]),null==(a=d[r])&&(a=d[r]=new e.AudioChannel),a),s=t[2],u=parseFloat(t[3]),l=h[i]=new e.InputStream(n,i),c=new e.BlobReader(l,s);c.onend=function(){o.play(s,u,c.getBlob())},n.sendAck(i,"OK",0)},blob:function(e){var t=parseInt(e[0]),n=e[1];h[t].onblob(n)},cfill:function(e){var t=parseInt(e[0]),n=v(parseInt(e[1])),r=parseInt(e[2]),a=parseInt(e[3]),i=parseInt(e[4]),o=parseInt(e[5]);u.setChannelMask(n,t),u.fillColor(n,r,a,i,o)},clip:function(e){var t=v(parseInt(e[0]));u.clip(t)},clipboard:function(t){var r=parseInt(t[0]),a=t[1];if(n.onclipboard){var i=h[r]=new e.InputStream(n,r);n.onclipboard(i,a)}else n.sendAck(r,"Clipboard unsupported",256)},close:function(e){var t=v(parseInt(e[0]));u.close(t)},copy:function(e){var t=v(parseInt(e[0])),n=parseInt(e[1]),r=parseInt(e[2]),a=parseInt(e[3]),i=parseInt(e[4]),o=parseInt(e[5]),s=v(parseInt(e[6])),l=parseInt(e[7])